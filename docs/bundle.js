!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/weather-rescue-demo",n(n.s=56)}([function(e,t){e.exports=React},function(e,t,n){e.exports=n(25)()},function(e,t,n){"use strict";var r=n(5),o=n(49);function i(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function a(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function s(e){return 1===e.length?"0"+e:e}function u(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=o,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),o=0;o<e.length;o+=2)n.push(parseInt(e[o]+e[o+1],16))}else for(var r=0,o=0;o<e.length;o++){var a=e.charCodeAt(o);a<128?n[r++]=a:a<2048?(n[r++]=a>>6|192,n[r++]=63&a|128):i(e,o)?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++o)),n[r++]=a>>18|240,n[r++]=a>>12&63|128,n[r++]=a>>6&63|128,n[r++]=63&a|128):(n[r++]=a>>12|224,n[r++]=a>>6&63|128,n[r++]=63&a|128)}else for(o=0;o<e.length;o++)n[o]=0|e[o];return n},t.toHex=function(e){for(var t="",n=0;n<e.length;n++)t+=s(e[n].toString(16));return t},t.htonl=a,t.toHex32=function(e,t){for(var n="",r=0;r<e.length;r++){var o=e[r];"little"===t&&(o=a(o)),n+=u(o.toString(16))}return n},t.zero2=s,t.zero8=u,t.join32=function(e,t,n,o){var i=n-t;r(i%4==0);for(var a=new Array(i/4),s=0,u=t;s<a.length;s++,u+=4){var c;c="big"===o?e[u]<<24|e[u+1]<<16|e[u+2]<<8|e[u+3]:e[u+3]<<24|e[u+2]<<16|e[u+1]<<8|e[u],a[s]=c>>>0}return a},t.split32=function(e,t){for(var n=new Array(4*e.length),r=0,o=0;r<e.length;r++,o+=4){var i=e[r];"big"===t?(n[o]=i>>>24,n[o+1]=i>>>16&255,n[o+2]=i>>>8&255,n[o+3]=255&i):(n[o+3]=i>>>24,n[o+2]=i>>>16&255,n[o+1]=i>>>8&255,n[o]=255&i)}return n},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,n){return e+t+n>>>0},t.sum32_4=function(e,t,n,r){return e+t+n+r>>>0},t.sum32_5=function(e,t,n,r,o){return e+t+n+r+o>>>0},t.sum64=function(e,t,n,r){var o=e[t],i=r+e[t+1]>>>0,a=(i<r?1:0)+n+o;e[t]=a>>>0,e[t+1]=i},t.sum64_hi=function(e,t,n,r){return(t+r>>>0<t?1:0)+e+n>>>0},t.sum64_lo=function(e,t,n,r){return t+r>>>0},t.sum64_4_hi=function(e,t,n,r,o,i,a,s){var u=0,c=t;return u+=(c=c+r>>>0)<t?1:0,u+=(c=c+i>>>0)<i?1:0,e+n+o+a+(u+=(c=c+s>>>0)<s?1:0)>>>0},t.sum64_4_lo=function(e,t,n,r,o,i,a,s){return t+r+i+s>>>0},t.sum64_5_hi=function(e,t,n,r,o,i,a,s,u,c){var l=0,h=t;return l+=(h=h+r>>>0)<t?1:0,l+=(h=h+i>>>0)<i?1:0,l+=(h=h+s>>>0)<s?1:0,e+n+o+a+u+(l+=(h=h+c>>>0)<c?1:0)>>>0},t.sum64_5_lo=function(e,t,n,r,o,i,a,s,u,c){return t+r+i+s+c>>>0},t.rotr64_hi=function(e,t,n){return(t<<32-n|e>>>n)>>>0},t.rotr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0},t.shr64_hi=function(e,t,n){return e>>>n},t.shr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0}},function(e,t,n){var r=n(8),o=n(11),i=new r(o.host+"/api",{"Content-Type":"application/json",Accept:"application/vnd.api+json; version=1"},{params:o.params,beforeEveryRequest:function(){return n(19).checkBearerToken()},handleError:function(e){var t;if(e instanceof Error)throw e;e.body&&"object"==typeof e.body?e.body.error?(t=e.body.error,e.body.error_description&&(t+=" "+e.error_description)):t=Array.isArray(e.body.errors)?e.body.errors.map(function(e){return"string"==typeof e.message?e.message:"object"==typeof e.message?Object.keys(e.message).map(function(t){return t+" "+e.message[t]}).join("\n"):void 0}).join("\n"):"Unknown error (bad response body)":t="Unknown error (bad response)";var n=new Error(t);throw n.status=e.status,n.statusText=e.statusText,n}});e.exports=i},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o,i,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,i,a,s],l=0;(u=new Error(t.replace(/%s/g,function(){return c[l++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=n,n.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}},function(e,t,n){"use strict";var r=n(2),o=n(5);function i(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=i,i.prototype.update=function(e,t){if(e=r.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var n=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-n,e.length),0===this.pending.length&&(this.pending=null),e=r.join32(e,0,e.length-n,this.endian);for(var o=0;o<e.length;o+=this._delta32)this._update(e,o,o+this._delta32)}return this},i.prototype.digest=function(e){return this.update(this._pad()),o(null===this.pending),this._digest(e)},i.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,r=new Array(n+this.padLength);r[0]=128;for(var o=1;o<n;o++)r[o]=0;if(e<<=3,"big"===this.endian){for(var i=8;i<this.padLength;i++)r[o++]=0;r[o++]=0,r[o++]=0,r[o++]=0,r[o++]=0,r[o++]=e>>>24&255,r[o++]=e>>>16&255,r[o++]=e>>>8&255,r[o++]=255&e}else for(r[o++]=255&e,r[o++]=e>>>8&255,r[o++]=e>>>16&255,r[o++]=e>>>24&255,r[o++]=0,r[o++]=0,r[o++]=0,r[o++]=0,i=8;i<this.padLength;i++)r[o++]=0;return r}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(){var t,r,o,i,a,s,u,c,l,h,p,f={}.hasOwnProperty,d=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},y=[].slice;h=n(30),p=n(9),r=n(10),c=n(45),i=n(18),u=n(17),t=n(16),s=["meta","links","linked","data"],a=["HEAD","GET"],l=["POST","PUT","DELETE"],o=function(e){var n,r,o,u;function m(e,t,n){this.root=e,this.headers=null!=t?t:{},this.params={},m.__super__.constructor.call(this,null),this._typesCache={},p(this,n)}for(function(e,t){for(var n in t)f.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(m,i),m.prototype.root="/",m.prototype.headers=null,m.prototype.params=null,m.prototype.reads=0,m.prototype.writes=0,m.prototype._typesCache=null,m.prototype.beforeEveryRequest=function(){return Promise.resolve()},m.prototype.request=function(e,n,r,o,i){return this.beforeEveryRequest().then((s=this,function(){var u,c,f,y;return e=e.toUpperCase(),f=s.root+n,c=p({},s.params,r),u=p({},t,s.headers,o),d.call(a,e)>=0?s.update({reads:s.reads+1}):d.call(l,e)>=0&&s.update({writes:s.writes+1}),(y=h(e,f,c,u,i)).catch(function(){return null}).then(function(){return d.call(a,e)>=0?s.update({reads:s.reads-1}):d.call(l,e)>=0?s.update({writes:s.writes-1}):void 0}),y.then(s.processResponse.bind(s)).catch(s.handleError.bind(s))}));var s},n=function(e){return m.prototype[e]=function(){return this.request.apply(this,[e].concat(y.call(arguments)))}},r=0,o=(u=["get","post","put","delete"]).length;r<o;r++)n(u[r]);return m.prototype.processResponse=function(e){var t,n,r,o,i,a,u,c,l,h,p,f,y,m,v,g,b;if(v=function(){try{return JSON.parse(e.text)}catch(e){return{}}}(),t=e.headers,"links"in v&&this._handleLinks(v.links),"linked"in v)for(b in l=v.linked)for(c=l[b],n=0,i=(h=[].concat(c)).length;n<i;n++)y=h[n],this.type(b).create(y,t,v.meta);if(g=[],"data"in v)for(r=0,a=(p=[].concat(v.data)).length;r<a;r++)y=p[r],g.push(this.type(y.type).create(y,t,v.meta));else for(b in v)if(m=v[b],d.call(s,b)<0)for(o=0,u=(f=[].concat(m)).length;o<u;o++)y=f[o],g.push(this.type(b).create(y,t,v.meta));return g},m.prototype._handleLinks=function(e){var t,n,r,o,i,a,s,u;for(s in i=[],e)r=e[s],u=(o=s.split("."))[0],t=o[1],"string"==typeof r?n=r:(n=r.href,a=r.type),i.push(this._handleLink(u,t,n,a));return i},m.prototype._handleLink=function(e,t,n,r){var o,i;if(null==(o=(i=this.type(e))._links)[t]&&(o[t]={}),null!=n&&(i._links[t].href=n),null!=r)return i._links[t].type=r},m.prototype.handleError=function(){return Promise.reject.apply(Promise,arguments)},m.prototype.type=function(e){var t;return null==(t=this._typesCache)[e]&&(t[e]=new c(e,this)),this._typesCache[e]},m}(),e.exports=o,e.exports.makeHTTPRequest=h,e.exports.Emitter=r,e.exports.Type=c,e.exports.Model=i,e.exports.Resource=u}).call(this)},function(e,t){(function(){var t={}.hasOwnProperty;e.exports=function(){var e,n,r,o,i,a;for(n=0,o=(i=Array.prototype.slice.call(arguments,1)).length;n<o;n++)if(null!=(e=i[n]))for(r in e)t.call(e,r)&&(a=e[r],arguments[0][r]=a);return arguments[0]}}).call(this)},function(e,t){(function(){var t,n,r=[].slice;t=function(e,t){var n,r,o,i;return o=function(){var o,i,a;for(a=[],n=o=0,i=e.length;o<i;n=++o)r=e[n],t[n]===r&&a.push(n);return a}(),e.length===(i=t.length)&&i===o.length},n=function(e,t){var n,o,i;Array.isArray(e)?(o=(i=e)[0],e=i[1],n=3<=i.length?r.call(i,2):[],"string"==typeof e&&(e=o[e])):n=[],e.apply(o,n.concat(t))},e.exports=function(){function e(){this._callbacks={}}return e.prototype._callbacks=null,e.prototype.listen=function(){var e,t,n,o,i;return e=2<=arguments.length?r.call(arguments,0,o=arguments.length-1):(o=0,[]),n=arguments[o++],null==(i=e[0])&&(i="change"),null==(t=this._callbacks)[i]&&(t[i]=[]),this._callbacks[i].push(n),this},e.prototype.stopListening=function(){var e,n,o,i,a,s,u,c,l;if(e=2<=arguments.length?r.call(arguments,0,s=arguments.length-1):(s=0,[]),n=arguments[s++],null==(l=e[0])&&(l="change"),null!=this._callbacks[l])if(null!=n){if(Array.isArray(n)){for(a=-1,i=u=(c=this._callbacks[l]).length-1;u>=0;i=u+=-1)if(o=c[i],Array.isArray(o)&&t(n,o)){a=i;break}}else a=this._callbacks[l].lastIndexOf(n);-1!==a&&this._callbacks[l].splice(a,1)}else this._callbacks[l].splice(0);return this},e.prototype.emit=function(){var e,t,o,i,a,s;if(s=arguments[0],i=2<=arguments.length?r.call(arguments,1):[],null==s&&(s="change"),s in this._callbacks)for(t=0,o=(a=this._callbacks[s]).length;t<o;t++)e=a[t],n(e,i);return this},e.prototype.destroy=function(){var e,t,n,r,o;for(o in this.emit("destroy"),this._callbacks)for(t=0,n=(r=this._callbacks[o]).length;t<n;t++)e=r[t],this.stopListening(o,e)},e}()}).call(this)},function(e,t,n){(function(t){var n=y(/\W?panoptes-api-host=([^&]+)/),r=y(/\W?panoptes-api-application=([^&]+)/),o=y(/\W?talk-host=([^&]+)/),i=y(/\W?sugar-host=([^&]+)/),a=y(/\W?stat-host=([^&]+)/),s=t.env.PANOPTES_API_HOST,u=t.env.PANOPTES_API_APPLICATION,c=t.env.TALK_HOST,l=t.env.SUGAR_HOST,h=t.env.STAT_HOST,p=y(/\W?env=(\w+)/)||"production";if(!p.match(/^(production|staging|development)$/))throw new Error('Panoptes Javascript Client Error: Invalid Environment; try setting NODE_ENV to "staging" instead of "production".');var f={http_cache:!0};if("undefined"!=typeof location&&null!==location){var d=window.location.search.substring(1);(d=d.split("&")).map(function(e){var t=e.split("="),n=decodeURIComponent(t[0]),r=decodeURIComponent(t[1]);f[n]&&(f[n]=r)})}function y(e){var t;return"undefined"!=typeof location&&null!==location&&(t=location.search.match(e)),t&&t[1]?t[1]:void 0}e.exports={host:n||s||{production:"https://www.zooniverse.org",staging:"https://panoptes-staging.zooniverse.org",development:"https://panoptes-staging.zooniverse.org"}[p],clientAppID:r||u||{production:"f79cf5ea821bb161d8cbb52d061ab9a2321d7cb169007003af66b43f7b79ce2a",staging:"535759b966935c297be11913acee7a9ca17c025f9f15520e7504728e71110a27",development:"535759b966935c297be11913acee7a9ca17c025f9f15520e7504728e71110a27"}[p],talkHost:o||c||{production:"https://talk.zooniverse.org",staging:"https://talk-staging.zooniverse.org",development:"https://talk-staging.zooniverse.org"}[p],sugarHost:i||l||{production:"https://notifications.zooniverse.org",staging:"https://notifications-staging.zooniverse.org",development:"https://notifications-staging.zooniverse.org"}[p],statHost:a||h||{production:"https://stats.zooniverse.org",staging:"https://stats-staging.zooniverse.org",development:"https://stats-staging.zooniverse.org"}[p],oauthHost:{production:"https://panoptes.zooniverse.org",staging:"https://panoptes-staging.zooniverse.org",development:"https://panoptes-staging.zooniverse.org"}[p],params:f}}).call(this,n(46))},function(e,t,n){"use strict";e.exports=n(27)},function(e,t,n){"use strict";var r=n(12),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?a:s[e.$$typeof]||o}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,d=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(d){var o=f(n);o&&o!==d&&e(t,o,r)}var a=l(n);h&&(a=a.concat(h(n)));for(var s=u(t),y=u(n),m=0;m<a.length;++m){var v=a[m];if(!(i[v]||r&&r[v]||y&&y[v]||s&&s[v])){var g=p(n,v);try{c(t,v,g)}catch(e){}}}return t}return t}},function(e,t,n){"use strict";(function(e,r){var o,i=n(24);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var a=Object(i.a)(o);t.a=a}).call(this,n(7),n(28)(e))},function(e,t,n){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t){(function(){e.exports={"Content-Type":"application/vnd.api+json",Accept:"application/vnd.api+json"}}).call(this)},function(e,t,n){(function(){var t,r,o,i,a={}.hasOwnProperty,s=[].slice;t=n(18),r=/{(.+?)}/g,o=function(e){function n(e){if(this._type=e,null==this._type)throw new Error('Don\'t call the Resource constructor directly, use `client.type("things").create({});`');this._headers={},this._meta={},this._linksCache={},this._savingKeys={},n.__super__.constructor.call(this,null),this._type.emit("change"),this.emit("create")}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,t),n.prototype._type=null,n.prototype._headers=null,n.prototype._meta=null,n.prototype._linksCache=null,n.prototype._savingKeys=null,n.prototype._write=Promise.resolve(),n.prototype.getMeta=function(e){return null==e&&(e=this._type._name),this._meta[e]},n.prototype.update=function(){var e;return e=n.__super__.update.apply(this,arguments),this.id&&this._type._resourcesCache[this.id]!==this&&(this._type._resourcesCache[this.id]=this,null!=this.href&&(this._type._resourcesCache[this.href]=this),this._type.emit("change")),e},n.prototype.save=function(e){var t,n,r,o,a;for(r in null==e&&(e={}),o={},n=this.toJSON.call(this.getChangesSinceSave()),o[this._type._name]=n,this._changedKeys.splice(0),n)null==(t=this._savingKeys)[r]&&(t[r]=0),this._savingKeys[r]+=1;return this._write=this._write.catch(function(){return null}).then((a=this,function(){var t;return t=a.id?a.refresh(!0,e).then(function(){return a._type._client.put(a._getURL(),o,a._getHeadersForModification(),e)}):a._type._client.post(a._type._getURL(),o,{},e),new i(t.then(function(e){var t;for(r in t=e[0],n)a._savingKeys[r]-=1,0===a._savingKeys[r]&&delete a._savingKeys[r];return t!==a&&(a.update(t),t.destroy()),a.emit("save"),a}))})),this._write},n.prototype.getChangesSinceSave=function(){var e,t,n,r,o;for(e={},t=0,r=(o=this._changedKeys).length;t<r;t++)e[n=o[t]]=this[n];return e},n.prototype.refresh=function(e,t){var n,r;if(null==t&&(t={}),e)return n=this.getChangesSinceSave(),this.refresh(!1,t).then((r=this,function(){return r.update(n)}));if(this.id)return this._type._client.get(this._getURL(),t);throw new Error("Can't refresh a resource with no ID")},n.prototype.uncache=function(){if(this.id)return this.emit("uncache"),delete this._type._resourcesCache[this.id],delete this._type._resourcesCache[this.href];throw new Error("Can't uncache a resource with no ID")},n.prototype.delete=function(e){var t;return null==e&&(e={}),this._write=this._write.catch(function(){return null}).then((t=this,function(){var n;return n=t.id?t.refresh(!0,e).then(function(){return t._type._client.delete(t._getURL(),null,t._getHeadersForModification(),e)}):Promise.resolve(),new i(n.then(function(){return t.emit("delete"),t._type.emit("change"),t.destroy(),null}))})),this._write},n.prototype.get=function(e,t){var n,r,o,a,s,u,c,l,h,p,f,d,y,m,v;return null!=this._linksCache[e]&&null==t?this._linksCache[e]:(f=null!=(u=this.links)?u[e]:void 0,m=this._type._links[e],(d=null!=f||null!=m?(o=null!=(c=null!=f?f.href:void 0)?c:null!=m?m.href:void 0,y=null!=(l=null!=f?f.type:void 0)?l:null!=m?m.type:void 0,null!=(a=null!=(h=null!=f?f.id:void 0)?h:null!=m?m.id:void 0)||(a="string"==typeof f?f:void 0),null!=(s=null!=(p=null!=f?f.ids:void 0)?p:null!=m?m.ids:void 0)||(s=Array.isArray(f)?f:void 0),null!=o?(r=this._applyHREF(o),null!=(n=this._type._client.type(y)._resourcesCache[r])&&null==t?Promise.resolve(n):this._type._client.get(r,t).then(function(e){return null!=a?e[0]:e})):null!=y?this._type._client.type(y).get(null!=a?a:s,t).then(function(e){return null!=a?e[0]:e}):void 0):e in this?Promise.resolve(this[e]):this._type._client.get(this._getURL(e))).then((v=this,function(){if(null==t)return v._linksCache[e]=d})),new i(d))},n.prototype._applyHREF=function(e){var t;return(t={})[this._type._name]=this,e.replace(r,function(n,r){var o,i,a,s,u;for(s=r.split("."),u=t;0!==s.length;)u=null!=(o=u[a=s.shift()])?o:null!=(i=u.links)?i[a]:void 0;if(Array.isArray(u)&&(u=u.join(",")),"string"!=typeof u)throw new Error("Value for '"+r+"' in '"+e+"' should be a string.");return u})},n.prototype.addLink=function(e,t){var n,r,o;return r=this._getURL("links",e),(n={})[e]=t,this._type._client.post(r,n).then((o=this,function(){return o.uncacheLink(e),o.refresh()}))},n.prototype.removeLink=function(e,t){var n,r;return n=this._getURL("links",e,[].concat(t).join(",")),this._type._client.delete(n).then((r=this,function(){return r.uncacheLink(e),r.refresh()}))},n.prototype.uncacheLink=function(e){return delete this._linksCache[e]},n.prototype._getHeadersForModification=function(){var e,t;for(e in t={"If-Unmodified-Since":this._getHeader("Last-Modified"),"If-Match":this._getHeader("ETag")})null==t[e]&&delete t[e];return t},n.prototype._getHeader=function(e){var t,n;return e=e.toLowerCase(),function(){var r,o;for(t in o=[],r=this._headers)n=r[t],t.toLowerCase()===e&&o.push(n);return o}.call(this)[0]},n.prototype._getURL=function(){var e;return this.href?[this.href].concat(s.call(arguments)).join("/"):(e=this._type)._getURL.apply(e,[this.id].concat(s.call(arguments)))},n}(),i=function(){var e,t;function n(e){if(this._promise=e,!(this._promise instanceof Promise))throw new Error("ResourcePromise requires a real promise instance")}for(e in n.prototype._promise=null,n.prototype.then=function(){var e;return(e=this._promise).then.apply(e,arguments)},n.prototype.catch=function(){var e;return(e=this._promise).catch.apply(e,arguments)},n.prototype.index=function(e){return this._promise=this._promise.then(function(t){var n,r;return n=e,r=t.length,t[e=(+n%(r=+r)+r)%r]}),this},t=o.prototype)"function"!=typeof t[e]||e in n.prototype||function(e){n.prototype[e]=function(){var t,n;return t=1<=arguments.length?s.call(arguments,0):[],this._promise=this._promise.then((n=this,function(r){var o,i,a;return a=function(){var n,a,s,u;for(u=[],n=0,a=(s=[].concat(r)).length;n<a;n++)o=s[n],(i=o[e].apply(o,t))instanceof this.constructor&&(i=i._promise),u.push(i);return u}.call(n),Array.isArray(r)?Promise.all(a):a[0]})),this}}(e);return n}(),e.exports=o,e.exports.Promise=i}).call(this)},function(e,t,n){(function(){var t,r,o,i,a={}.hasOwnProperty,s=[].slice,u=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};t=n(10),o=n(9),r=function(e){var t;return(t=parseInt(e,10)).toString(10)===e&&!isNaN(t)},i=function(e){var t,n,r,o,a,s;if(Array.isArray(e)){for(a=[],t=0,r=e.length;t<r;t++)s=e[t],a.push(i(s));return a}if(null!=e&&"object"==typeof e){for(n in o={},e)s=e[n],"_"!==n.charAt(0)&&(o[n]=i(s));return o}return e},e.exports=function(e){function n(){var e;e=1<=arguments.length?s.call(arguments,0):[],n.__super__.constructor.apply(this,arguments),this._changedKeys=[],o.apply(null,[this].concat(s.call(e))),this.emit("create")}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,t),n.prototype._changedKeys=null,n.prototype.update=function(e){var t,n,o,i,s,c,l,h,p,f;if(null==e&&(e={}),"string"==typeof e)for(n=0,s=arguments.length;n<s;n++)o=arguments[n],u.call(this._changedKeys,o)<0&&(h=this._changedKeys).push.apply(h,arguments);else for(o in e)if(a.call(e,o)){for(f=e[o],p=(l=o.split("."))[0],t=this;1!==l.length;)null==t[c=l[0]]&&(t[c]=r(l[1])?[]:{}),t=t[l.shift()];i=l.shift(),void 0===f?Array.isArray(t)?t.splice(i,1):delete t[i]:t[i]=f,u.call(this._changedKeys,p)<0&&this._changedKeys.push(p)}return this.emit("change"),this},n.prototype.hasUnsavedChanges=function(){return 0!==this._changedKeys.length},n.prototype.toJSON=function(){return i(this)},n.prototype.destroy=function(){return this._changedKeys.splice(0),n.__super__.destroy.apply(this,arguments)},n}()}).call(this)},function(e,t,n){var r=n(8),o=r.Model,i=r.makeHTTPRequest,a=n(11),s=n(47),u={"Content-Type":"application/json",Accept:"application/json"};e.exports=new o({_currentUserPromise:null,_bearerToken:"",_bearerTokenExpiration:NaN,_refreshToken:"",_tokenRefreshPromise:null,_getAuthToken:function(){console.log("Getting auth token");var e=a.host+"/users/sign_in/?now="+Date.now();return i("GET",e,null,u).then(function(e){var t=e.header["x-csrf-token"];return console.info("Got auth token",t.slice(-6)),t}).catch(function(e){console.error("Failed to get auth token"),s.handleError(e)})},_getBearerToken:function(){if(console.log("Getting bearer token"),this._bearerToken)return console.info("Already had a bearer token",this._bearerToken),Promise.resolve(this._bearerToken);var e=a.host+"/oauth/token",t={grant_type:"password",client_id:a.clientAppID};return i("POST",e,t,u).then(function(e){var t=this._handleNewBearerToken(e);return console.info("Got bearer token",t.slice(-6)),t}.bind(this)).catch(function(e){return console.error("Failed to get bearer token"),s.handleError(e)})},_handleNewBearerToken:function(e){var t=JSON.parse(e.text);return this._bearerToken=t.access_token,s.headers.Authorization="Bearer "+this._bearerToken,this._bearerTokenExpiration=Date.now()+1e3*t.expires_in,this._refreshToken=t.refresh_token,this._bearerToken},_bearerTokenIsExpired:function(){return Date.now()>=this._bearerTokenExpiration-6e4},_refreshBearerToken:function(){if(null===this._tokenRefreshPromise){console.log("Refreshing expired bearer token");var e=a.host+"/oauth/token",t={grant_type:"refresh_token",refresh_token:this._refreshToken,client_id:a.clientAppID};this._tokenRefreshPromise=i("POST",e,t,u).then(function(e){var t=this._handleNewBearerToken(e);console.info("Refreshed bearer token",t.slice(-6))}.bind(this)).catch(function(e){console.error("Failed to refresh bearer token"),s.handleError(e)}).then(function(){this._tokenRefreshPromise=null}.bind(this))}return this._tokenRefreshPromise},_deleteBearerToken:function(){this._bearerToken="",delete s.headers.Authorization,this._bearerTokenExpiration=NaN,this._refreshToken="",console.log("Deleted bearer token")},_getSession:function(){return console.log("Getting session"),s.get("/me").then(function(e){var t=e[0];return console.info("Got session",t.login,t.id),t}).catch(function(e){throw console.error("Failed to get session"),e})},register:function(e){var t=arguments;return this.checkCurrent().then(function(n){if(n)return this.signOut().then(function(){return this.register.apply(this,t)}.bind(this));console.log("Registering new account",e.login);var r=this._getAuthToken().then(function(t){var n={authenticity_token:t,user:{login:e.login,email:e.email,password:e.password,credited_name:e.credited_name,global_email_communication:e.global_email_communication,project_id:e.project_id,beta_email_communication:e.beta_email_communication,project_email_communication:e.project_email_communication}};return s.post("/../users",n,u).then(function(){return this._getBearerToken().then(function(){return this._getSession().then(function(e){return console.info("Registered account",e.login,e.id),e})}.bind(this))}.bind(this)).catch(function(e){throw console.error("Failed to register"),e})}.bind(this));return this.update({_currentUserPromise:r.catch(function(){return null})}),r}.bind(this))},checkCurrent:function(){return this._currentUserPromise||(console.log("Checking current user"),this.update({_currentUserPromise:this._getBearerToken().then(function(){return this._getSession()}.bind(this)).catch(function(){return console.info("No current user"),null})})),this._currentUserPromise},checkBearerToken:function(){return this._bearerTokenIsExpired()?this._refreshBearerToken():Promise.resolve(this._bearerToken)},signIn:function(e){var t=arguments;return this.checkCurrent().then(function(n){if(n)return this.signOut().then(function(){return this.signIn.apply(this,t)}.bind(this));console.log("Signing in",e.login);var r=this._getAuthToken().then(function(t){var n=a.host+"/users/sign_in",r={authenticity_token:t,user:{login:e.login,password:e.password,remember_me:!0}};return i("POST",n,r,u).then(function(){return this._getBearerToken().then(function(){return this._getSession().then(function(e){return console.info("Signed in",e.login,e.id),e}.bind(this))}.bind(this))}.bind(this)).catch(function(e){console.error("Failed to sign in"),s.handleError(e)})}.bind(this));return this.update({_currentUserPromise:r.catch(function(){return null})}),r}.bind(this))},changePassword:function(e){return this.checkCurrent().then(function(t){if(t)return this._getAuthToken().then(function(n){var r={authenticity_token:n,user:{current_password:e.current,password:e.replacement,password_confirmation:e.replacement}};return s.put("/../users",r,u).then(function(){return this.signOut()}.bind(this)).then(function(){return this.signIn({login:t.login,password:e.replacement})}.bind(this))}.bind(this));throw new Error("No signed-in user to change the password for")}.bind(this))},requestPasswordReset:function(e){return this._getAuthToken().then(function(t){var n={authenticity_token:t,user:{email:e.email}};return s.post("/../users/password",n,u)}.bind(this))},resetPassword:function(e){return this._getAuthToken().then(function(t){var n={authenticity_token:t,user:{password:e.password,password_confirmation:e.confirmation,reset_password_token:e.token}};return s.put("/../users/password",n,u)}.bind(this))},disableAccount:function(){return console.log("Disabling account"),this.checkCurrent().then(function(e){if(e)return e.delete().then(function(){return this._deleteBearerToken(),this.update({_currentUserPromise:Promise.resolve(null)}),console.info("Disabled account"),null}.bind(this));throw new Error("Failed to disable account; not signed in")}.bind(this))},signOut:function(){return console.log("Signing out"),this.checkCurrent().then(function(e){if(e)return this._getAuthToken().then(function(e){var t=a.host+"/users/sign_out",n=Object.create(u);return n["X-CSRF-Token"]=e,i("DELETE",t,null,n).then(function(){return this._deleteBearerToken(),this.update({_currentUserPromise:Promise.resolve(null)}),console.info("Signed out"),null}.bind(this)).catch(function(e){return console.error("Failed to sign out"),s.handleError(e)}.bind(this))}.bind(this));throw new Error("Failed to sign out; not signed in")}.bind(this))},unsubscribeEmail:function(e){return this._getAuthToken().then(function(t){var n=a.host+"/unsubscribe",r={authenticity_token:t,email:e.email};return i("POST",n,r,u)}.bind(this))}})},function(e,t,n){"use strict";var r=n(2).rotr32;function o(e,t,n){return e&t^~e&n}function i(e,t,n){return e&t^e&n^t&n}function a(e,t,n){return e^t^n}t.ft_1=function(e,t,n,r){return 0===e?o(t,n,r):1===e||3===e?a(t,n,r):2===e?i(t,n,r):void 0},t.ch32=o,t.maj32=i,t.p32=a,t.s0_256=function(e){return r(e,2)^r(e,13)^r(e,22)},t.s1_256=function(e){return r(e,6)^r(e,11)^r(e,25)},t.g0_256=function(e){return r(e,7)^r(e,18)^e>>>3},t.g1_256=function(e){return r(e,17)^r(e,19)^e>>>10}},function(e,t,n){"use strict";var r=n(2),o=n(6),i=n(20),a=n(5),s=r.sum32,u=r.sum32_4,c=r.sum32_5,l=i.ch32,h=i.maj32,p=i.s0_256,f=i.s1_256,d=i.g0_256,y=i.g1_256,m=o.BlockHash,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function g(){if(!(this instanceof g))return new g;m.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=v,this.W=new Array(64)}r.inherits(g,m),e.exports=g,g.blockSize=512,g.outSize=256,g.hmacStrength=192,g.padLength=64,g.prototype._update=function(e,t){for(var n=this.W,r=0;r<16;r++)n[r]=e[t+r];for(;r<n.length;r++)n[r]=u(y(n[r-2]),n[r-7],d(n[r-15]),n[r-16]);var o=this.h[0],i=this.h[1],m=this.h[2],v=this.h[3],g=this.h[4],b=this.h[5],E=this.h[6],_=this.h[7];for(a(this.k.length===n.length),r=0;r<n.length;r++){var T=c(_,f(g),l(g,b,E),this.k[r],n[r]),w=s(p(o),h(o,i,m));_=E,E=b,b=g,g=s(v,T),v=m,m=i,i=o,o=s(T,w)}this.h[0]=s(this.h[0],o),this.h[1]=s(this.h[1],i),this.h[2]=s(this.h[2],m),this.h[3]=s(this.h[3],v),this.h[4]=s(this.h[4],g),this.h[5]=s(this.h[5],b),this.h[6]=s(this.h[6],E),this.h[7]=s(this.h[7],_)},g.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(e,t,n){"use strict";var r=n(2),o=n(6),i=n(5),a=r.rotr64_hi,s=r.rotr64_lo,u=r.shr64_hi,c=r.shr64_lo,l=r.sum64,h=r.sum64_hi,p=r.sum64_lo,f=r.sum64_4_hi,d=r.sum64_4_lo,y=r.sum64_5_hi,m=r.sum64_5_lo,v=o.BlockHash,g=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;v.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=g,this.W=new Array(160)}function E(e,t,n,r,o){var i=e&n^~e&o;return i<0&&(i+=4294967296),i}function _(e,t,n,r,o,i){var a=t&r^~t&i;return a<0&&(a+=4294967296),a}function T(e,t,n,r,o){var i=e&n^e&o^n&o;return i<0&&(i+=4294967296),i}function w(e,t,n,r,o,i){var a=t&r^t&i^r&i;return a<0&&(a+=4294967296),a}function S(e,t){var n=a(e,t,28)^a(t,e,2)^a(t,e,7);return n<0&&(n+=4294967296),n}function O(e,t){var n=s(e,t,28)^s(t,e,2)^s(t,e,7);return n<0&&(n+=4294967296),n}function C(e,t){var n=a(e,t,14)^a(e,t,18)^a(t,e,9);return n<0&&(n+=4294967296),n}function R(e,t){var n=s(e,t,14)^s(e,t,18)^s(t,e,9);return n<0&&(n+=4294967296),n}function k(e,t){var n=a(e,t,1)^a(e,t,8)^u(e,t,7);return n<0&&(n+=4294967296),n}function A(e,t){var n=s(e,t,1)^s(e,t,8)^c(e,t,7);return n<0&&(n+=4294967296),n}function I(e,t){var n=a(e,t,19)^a(t,e,29)^u(e,t,6);return n<0&&(n+=4294967296),n}function P(e,t){var n=s(e,t,19)^s(t,e,29)^c(e,t,6);return n<0&&(n+=4294967296),n}r.inherits(b,v),e.exports=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(e,t){for(var n=this.W,r=0;r<32;r++)n[r]=e[t+r];for(;r<n.length;r+=2){var o=I(n[r-4],n[r-3]),i=P(n[r-4],n[r-3]),a=n[r-14],s=n[r-13],u=k(n[r-30],n[r-29]),c=A(n[r-30],n[r-29]),l=n[r-32],h=n[r-31];n[r]=f(o,i,a,s,u,c,l,h),n[r+1]=d(o,i,a,s,u,c,l,h)}},b.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,r=this.h[0],o=this.h[1],a=this.h[2],s=this.h[3],u=this.h[4],c=this.h[5],f=this.h[6],d=this.h[7],v=this.h[8],g=this.h[9],b=this.h[10],k=this.h[11],A=this.h[12],I=this.h[13],P=this.h[14],N=this.h[15];i(this.k.length===n.length);for(var x=0;x<n.length;x+=2){var j=P,L=N,D=C(v,g),M=R(v,g),U=E(v,g,b,k,A),H=_(v,g,b,k,A,I),z=this.k[x],F=this.k[x+1],q=n[x],W=n[x+1],B=y(j,L,D,M,U,H,z,F,q,W),G=m(j,L,D,M,U,H,z,F,q,W);j=S(r,o),L=O(r,o),D=T(r,o,a,s,u),M=w(r,o,a,s,u,c);var K=h(j,L,D,M),V=p(j,L,D,M);P=A,N=I,A=b,I=k,b=v,k=g,v=h(f,d,B,G),g=p(d,d,B,G),f=u,d=c,u=a,c=s,a=r,s=o,r=h(B,G,K,V),o=p(B,G,K,V)}l(this.h,0,r,o),l(this.h,2,a,s),l(this.h,4,u,c),l(this.h,6,f,d),l(this.h,8,v,g),l(this.h,10,b,k),l(this.h,12,A,I),l(this.h,14,P,N)},b.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var r=n(26);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";
/** @license React v16.8.6
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.async_mode"):60111,p=r?Symbol.for("react.concurrent_mode"):60111,f=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,y=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116;function v(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case h:case p:case a:case u:case s:case d:return e;default:switch(e=e&&e.$$typeof){case l:case f:case c:return e;default:return t}}case m:case y:case i:return t}}}function g(e){return v(e)===p}t.typeOf=v,t.AsyncMode=h,t.ConcurrentMode=p,t.ContextConsumer=l,t.ContextProvider=c,t.Element=o,t.ForwardRef=f,t.Fragment=a,t.Lazy=m,t.Memo=y,t.Portal=i,t.Profiler=u,t.StrictMode=s,t.Suspense=d,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===p||e===u||e===s||e===d||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===y||e.$$typeof===c||e.$$typeof===l||e.$$typeof===f)},t.isAsyncMode=function(e){return g(e)||v(e)===h},t.isConcurrentMode=g,t.isContextConsumer=function(e){return v(e)===l},t.isContextProvider=function(e){return v(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return v(e)===f},t.isFragment=function(e){return v(e)===a},t.isLazy=function(e){return v(e)===m},t.isMemo=function(e){return v(e)===y},t.isPortal=function(e){return v(e)===i},t.isProfiler=function(e){return v(e)===u},t.isStrictMode=function(e){return v(e)===s},t.isSuspense=function(e){return v(e)===d}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){(function(e){!function(t){"use strict";function n(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function o(e,t,n){o.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function i(e,t){i.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function a(e,t){a.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function s(e,t,n){s.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function u(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}function c(e){var t=void 0===e?"undefined":w(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function l(e,t,n,r,h,p,f){f=f||[];var d=(h=h||[]).slice(0);if(void 0!==p){if(r){if("function"==typeof r&&r(d,p))return;if("object"===(void 0===r?"undefined":w(r))){if(r.prefilter&&r.prefilter(d,p))return;if(r.normalize){var y=r.normalize(d,p,e,t);y&&(e=y[0],t=y[1])}}}d.push(p)}"regexp"===c(e)&&"regexp"===c(t)&&(e=e.toString(),t=t.toString());var m=void 0===e?"undefined":w(e),v=void 0===t?"undefined":w(t),g="undefined"!==m||f&&f[f.length-1].lhs&&f[f.length-1].lhs.hasOwnProperty(p),b="undefined"!==v||f&&f[f.length-1].rhs&&f[f.length-1].rhs.hasOwnProperty(p);if(!g&&b)n(new i(d,t));else if(!b&&g)n(new a(d,e));else if(c(e)!==c(t))n(new o(d,e,t));else if("date"===c(e)&&e-t!=0)n(new o(d,e,t));else if("object"===m&&null!==e&&null!==t)if(f.filter(function(t){return t.lhs===e}).length)e!==t&&n(new o(d,e,t));else{if(f.push({lhs:e,rhs:t}),Array.isArray(e)){var E;for(e.length,E=0;E<e.length;E++)E>=t.length?n(new s(d,E,new a(void 0,e[E]))):l(e[E],t[E],n,r,d,E,f);for(;E<t.length;)n(new s(d,E,new i(void 0,t[E++])))}else{var _=Object.keys(e),T=Object.keys(t);_.forEach(function(o,i){var a=T.indexOf(o);a>=0?(l(e[o],t[o],n,r,d,o,f),T=u(T,a)):l(e[o],void 0,n,r,d,o,f)}),T.forEach(function(e){l(void 0,t[e],n,r,d,e,f)})}f.length=f.length-1}else e!==t&&("number"===m&&isNaN(e)&&isNaN(t)||n(new o(d,e,t)))}function h(e,t,n,r){return r=r||[],l(e,t,function(e){e&&r.push(e)},n),r.length?r:void 0}function p(e,t,n){if(e&&t&&n&&n.kind){for(var r=e,o=-1,i=n.path?n.path.length-1:0;++o<i;)void 0===r[n.path[o]]&&(r[n.path[o]]="number"==typeof n.path[o]?[]:{}),r=r[n.path[o]];switch(n.kind){case"A":!function e(t,n,r){if(r.path&&r.path.length){var o,i=t[n],a=r.path.length-1;for(o=0;o<a;o++)i=i[r.path[o]];switch(r.kind){case"A":e(i[r.path[o]],r.index,r.item);break;case"D":delete i[r.path[o]];break;case"E":case"N":i[r.path[o]]=r.rhs}}else switch(r.kind){case"A":e(t[n],r.index,r.item);break;case"D":t=u(t,n);break;case"E":case"N":t[n]=r.rhs}return t}(n.path?r[n.path[o]]:r,n.index,n.item);break;case"D":delete r[n.path[o]];break;case"E":case"N":r[n.path[o]]=n.rhs}}}function f(e){return"color: "+C[e].color+"; font-weight: bold"}function d(e,t,n,r){var o=h(e,t);try{r?n.groupCollapsed("diff"):n.group("diff")}catch(e){n.log("diff")}o?o.forEach(function(e){var t=e.kind,r=function(e){var t=e.kind,n=e.path,r=e.lhs,o=e.rhs,i=e.index,a=e.item;switch(t){case"E":return[n.join("."),r,"→",o];case"N":return[n.join("."),o];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+i+"]",a];default:return[]}}(e);n.log.apply(n,["%c "+C[t].text,f(t)].concat(S(r)))}):n.log("—— no diff ——");try{n.groupEnd()}catch(e){n.log("—— diff end —— ")}}function y(e,t,n,r){switch(void 0===e?"undefined":w(e)){case"object":return"function"==typeof e[r]?e[r].apply(e,S(n)):e[r];case"function":return e(t);default:return e}}function m(e,t){var n=t.logger,r=t.actionTransformer,o=t.titleFormatter,i=void 0===o?function(e){var t=e.timestamp,n=e.duration;return function(e,r,o){var i=["action"];return i.push("%c"+String(e.type)),t&&i.push("%c@ "+r),n&&i.push("%c(in "+o.toFixed(2)+" ms)"),i.join(" ")}}(t):o,a=t.collapsed,s=t.colors,u=t.level,c=t.diff,l=void 0===t.titleFormatter;e.forEach(function(o,h){var p=o.started,f=o.startedTime,m=o.action,v=o.prevState,g=o.error,b=o.took,E=o.nextState,T=e[h+1];T&&(E=T.prevState,b=T.started-p);var w=r(m),S="function"==typeof a?a(function(){return E},m,o):a,O=_(f),C=s.title?"color: "+s.title(w)+";":"",R=["color: gray; font-weight: lighter;"];R.push(C),t.timestamp&&R.push("color: gray; font-weight: lighter;"),t.duration&&R.push("color: gray; font-weight: lighter;");var k=i(w,O,b);try{S?s.title&&l?n.groupCollapsed.apply(n,["%c "+k].concat(R)):n.groupCollapsed(k):s.title&&l?n.group.apply(n,["%c "+k].concat(R)):n.group(k)}catch(e){n.log(k)}var A=y(u,w,[v],"prevState"),I=y(u,w,[w],"action"),P=y(u,w,[g,v],"error"),N=y(u,w,[E],"nextState");if(A)if(s.prevState){var x="color: "+s.prevState(v)+"; font-weight: bold";n[A]("%c prev state",x,v)}else n[A]("prev state",v);if(I)if(s.action){var j="color: "+s.action(w)+"; font-weight: bold";n[I]("%c action    ",j,w)}else n[I]("action    ",w);if(g&&P)if(s.error){var L="color: "+s.error(g,v)+"; font-weight: bold;";n[P]("%c error     ",L,g)}else n[P]("error     ",g);if(N)if(s.nextState){var D="color: "+s.nextState(E)+"; font-weight: bold";n[N]("%c next state",D,E)}else n[N]("next state",E);c&&d(v,E,n,S);try{n.groupEnd()}catch(e){n.log("—— log end ——")}})}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},R,e),n=t.logger,r=t.stateTransformer,o=t.errorTransformer,i=t.predicate,a=t.logErrors,s=t.diffPredicate;if(void 0===n)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var u=[];return function(e){var n=e.getState;return function(e){return function(c){if("function"==typeof i&&!i(n,c))return e(c);var l={};u.push(l),l.started=T.now(),l.startedTime=new Date,l.prevState=r(n()),l.action=c;var h=void 0;if(a)try{h=e(c)}catch(e){l.error=o(e)}else h=e(c);l.took=T.now()-l.started,l.nextState=r(n());var p=t.diff&&"function"==typeof s?s(n,c):t.diff;if(m(u,Object.assign({},t,{diff:p})),u.length=0,l.error)throw l.error;return h}}}}var g,b,E=function(e,t){return function(e,t){return new Array(t+1).join(e)}("0",t-e.toString().length)+e},_=function(e){return E(e.getHours(),2)+":"+E(e.getMinutes(),2)+":"+E(e.getSeconds(),2)+"."+E(e.getMilliseconds(),3)},T="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},O=[];g="object"===(void 0===e?"undefined":w(e))&&e?e:"undefined"!=typeof window?window:{},(b=g.DeepDiff)&&O.push(function(){void 0!==b&&g.DeepDiff===h&&(g.DeepDiff=b,b=void 0)}),n(o,r),n(i,r),n(a,r),n(s,r),Object.defineProperties(h,{diff:{value:h,enumerable:!0},observableDiff:{value:l,enumerable:!0},applyDiff:{value:function(e,t,n){e&&t&&l(e,t,function(r){n&&!n(e,t,r)||p(e,t,r)})},enumerable:!0},applyChange:{value:p,enumerable:!0},revertChange:{value:function(e,t,n){if(e&&t&&n&&n.kind){var r,o,i=e;for(o=n.path.length-1,r=0;r<o;r++)void 0===i[n.path[r]]&&(i[n.path[r]]={}),i=i[n.path[r]];switch(n.kind){case"A":!function e(t,n,r){if(r.path&&r.path.length){var o,i=t[n],a=r.path.length-1;for(o=0;o<a;o++)i=i[r.path[o]];switch(r.kind){case"A":e(i[r.path[o]],r.index,r.item);break;case"D":case"E":i[r.path[o]]=r.lhs;break;case"N":delete i[r.path[o]]}}else switch(r.kind){case"A":e(t[n],r.index,r.item);break;case"D":case"E":t[n]=r.lhs;break;case"N":t=u(t,n)}return t}(i[n.path[r]],n.index,n.item);break;case"D":case"E":i[n.path[r]]=n.lhs;break;case"N":delete i[n.path[r]]}}},enumerable:!0},isConflict:{value:function(){return void 0!==b},enumerable:!0},noConflict:{value:function(){return O&&(O.forEach(function(e){e()}),O=null),h},enumerable:!0}});var C={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},R={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState;return"function"==typeof t||"function"==typeof n?v()({dispatch:t,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};t.defaults=R,t.createLogger=v,t.logger=k,t.default=k,Object.defineProperty(t,"__esModule",{value:!0})}(t)}).call(this,n(7))},function(e,t,n){(function(){var t,r,o,i,a;a=n(31),t=n(16),i=n(37),r={},null!=a.agent&&(a=a.agent()),null==a.parse&&(a.parse={}),a.parse[t.Accept]=JSON.parse.bind(JSON),o=function(e,t,n,s,u){var c,l,h,p,f;if(null==s&&(s={}),l=Array.prototype.slice.call(arguments),e=e.toLowerCase(),t=i(t),"get"===e){for(c in n)f=n[c],Array.isArray(f)&&(n[c]=f.join(","));if(p=t+" "+JSON.stringify(n),null!=r[p])return r[p]}return h=new Promise(function(i,c){var h;return null!=(h=(h=function(){switch(e){case"get":return a.get(t).query(n);case"head":return a.head(t).query(n);case"put":return a.put(t).query(u).send(n);case"post":return a.post(t).query(u).send(n);case"delete":return a.del(t).query(u).query(n)}}()).set(s)).withCredentials&&(h=h.withCredentials()),h.end(function(e,t){return delete r[p],408===(null!=e?e.status:void 0)?i(o.apply(null,l)):null!=e?c(null!=t?t:e):i(t)})}),"get"===e&&(r[p]=h),h},e.exports=o}).call(this)},function(e,t,n){var r;"undefined"!=typeof window?r=window:"undefined"!=typeof self?r=self:(console.warn("Using browser-only version of superagent in non-browser environment"),r=this);var o=n(32),i=n(33),a=n(15),s=n(34),u=n(36);function c(){}var l=t=e.exports=function(e,n){return"function"==typeof n?new t.Request("GET",e).end(n):1==arguments.length?new t.Request("GET",e):new t.Request(e,n)};t.Request=v,l.getXHR=function(){if(!(!r.XMLHttpRequest||r.location&&"file:"==r.location.protocol&&r.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var h="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function p(e){if(!a(e))return e;var t=[];for(var n in e)f(t,n,e[n]);return t.join("&")}function f(e,t,n){if(null!=n)if(Array.isArray(n))n.forEach(function(n){f(e,t,n)});else if(a(n))for(var r in n)f(e,t+"["+r+"]",n[r]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));else null===n&&e.push(encodeURIComponent(t))}function d(e){for(var t,n,r={},o=e.split("&"),i=0,a=o.length;i<a;++i)-1==(n=(t=o[i]).indexOf("="))?r[decodeURIComponent(t)]="":r[decodeURIComponent(t.slice(0,n))]=decodeURIComponent(t.slice(n+1));return r}function y(e){return/[\/+]json($|[^-\w])/.test(e)}function m(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=function(e){for(var t,n,r,o,i=e.split(/\r?\n/),a={},s=0,u=i.length;s<u;++s)-1!==(t=(n=i[s]).indexOf(":"))&&(r=n.slice(0,t).toLowerCase(),o=h(n.slice(t+1)),a[r]=o);return a}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function v(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e,t=null,r=null;try{r=new m(n)}catch(e){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=e,n.xhr?(t.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,t.status=n.xhr.status?n.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),n.callback(t)}n.emit("response",r);try{n._isResponseOK(r)||(e=new Error(r.statusText||"Unsuccessful HTTP response"))}catch(t){e=t}e?(e.original=t,e.response=r,e.status=r.status,n.callback(e,r)):n.callback(null,r)})}function g(e,t,n){var r=l("DELETE",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}l.serializeObject=p,l.parseString=d,l.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},l.serialize={"application/x-www-form-urlencoded":p,"application/json":JSON.stringify},l.parse={"application/x-www-form-urlencoded":d,"application/json":JSON.parse},s(m.prototype),m.prototype._parseBody=function(e){var t=l.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&y(this.type)&&(t=l.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},m.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,r="cannot "+t+" "+n+" ("+this.status+")",o=new Error(r);return o.status=this.status,o.method=t,o.url=n,o},l.Response=m,o(v.prototype),i(v.prototype),v.prototype.type=function(e){return this.set("Content-Type",l.types[e]||e),this},v.prototype.accept=function(e){return this.set("Accept",l.types[e]||e),this},v.prototype.auth=function(e,t,n){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(n=t,t=""),n||(n={type:"function"==typeof btoa?"basic":"auto"});return this._auth(e,t,n,function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")})},v.prototype.query=function(e){return"string"!=typeof e&&(e=p(e)),e&&this._query.push(e),this},v.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,n||t.name)}return this},v.prototype._getFormData=function(){return this._formData||(this._formData=new r.FormData),this._formData},v.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var n=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),n(e,t)},v.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},v.prototype.buffer=v.prototype.ca=v.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},v.prototype.pipe=v.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},v.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},v.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||c,this._finalizeQueryString(),this._end()},v.prototype._end=function(){var e=this,t=this.xhr=l.getXHR(),n=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var n=t.readyState;if(n>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==n){var r;try{r=t.status}catch(e){r=0}if(!r){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var r=function(t,n){n.total>0&&(n.percent=n.loaded/n.total*100),n.direction=t,e.emit("progress",n)};if(this.hasListeners("progress"))try{t.onprogress=r.bind(null,"download"),t.upload&&(t.upload.onprogress=r.bind(null,"upload"))}catch(e){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof n&&!this._isHost(n)){var o=this._header["content-type"],i=this._serializer||l.serialize[o?o.split(";")[0]:""];!i&&y(o)&&(i=l.serialize["application/json"]),i&&(n=i(n))}for(var a in this.header)null!=this.header[a]&&this.header.hasOwnProperty(a)&&t.setRequestHeader(a,this.header[a]);return this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0!==n?n:null),this},l.agent=function(){return new u},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(e){u.prototype[e.toLowerCase()]=function(t,n){var r=new l.Request(e,t);return this._setDefaults(r),n&&r.end(n),r}}),u.prototype.del=u.prototype.delete,l.get=function(e,t,n){var r=l("GET",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},l.head=function(e,t,n){var r=l("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},l.options=function(e,t,n){var r=l("OPTIONS",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},l.del=g,l.delete=g,l.patch=function(e,t,n){var r=l("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},l.post=function(e,t,n){var r=l("POST",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},l.put=function(e,t,n){var r=l("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){"use strict";var r=n(15);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},o.prototype.parse=function(e){return this._parser=e,this},o.prototype.responseType=function(e){return this._responseType=e,this},o.prototype.serialize=function(e){return this._serializer=e,this},o.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},o.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var i=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];o.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~i.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},o.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},o.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(e,t){n.end(function(n,r){n?t(n):e(r)})})}return this._fullfilledPromise.then(e,t)},o.prototype.catch=function(e){return this.then(void 0,e)},o.prototype.use=function(e){return e(this),this},o.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},o.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},o.prototype.get=function(e){return this._header[e.toLowerCase()]},o.prototype.getHeader=o.prototype.get,o.prototype.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},o.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},o.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),r(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var o in t)this.field(e,t[o]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},o.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},o.prototype._auth=function(e,t,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},o.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},o.prototype.redirects=function(e){return this._maxRedirects=e,this},o.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},o.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},o.prototype.send=function(e){var t=r(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&r(this._data))for(var o in e)this._data[o]=e[o];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type("json"),this)},o.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},o.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},o.prototype._appendQueryString=function(){console.trace("Unsupported")},o.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},o.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},function(e,t,n){"use strict";var r=n(35);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.get=function(e){return this.header[e.toLowerCase()]},o.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=r.type(t);var n=r.params(t);for(var o in n)this[o]=n[o];this.links={};try{e.link&&(this.links=r.parseLinks(e.link))}catch(e){}},o.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,t,n){"use strict";t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce(function(e,t){var n=t.split(/ *= */),r=n.shift(),o=n.shift();return r&&o&&(e[r]=o),e},{})},t.parseLinks=function(e){return e.split(/ *, */).reduce(function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e},{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(e){n.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}}),n.prototype._setDefaults=function(e){this._defaults.forEach(function(t){e[t.fn].apply(e,t.arguments)})},e.exports=n},function(e,t,n){e.exports=function(e){for(var t=[],n={},r={},o=0;o<256;o+=1){for(var i=String.fromCharCode(o),a=o.toString(16).toUpperCase();a.length<2;)a="0"+a;r[a]=i,i!==encodeURIComponent(i)&&(n[a]=!0,o<128&&"/"!==i&&"%"!==i&&"="!==i&&t.push(o))}var s=new RegExp("["+t.map(function(e){var t=e.toString("16");return"\\x"+(t.length<2?"0":"")+t}).join("")+"]","g");function u(e,t){return e.replace(/%([0-9a-f]{2})/gi,function(e,t){var o=t.toUpperCase();return n[o]?"%"+o:r[o]}).replace(s,t?function(e){return t[e]?e:encodeURIComponent(e)}:encodeURIComponent)}function c(e,t){if(e=e||"","protocol"===t)e=e.toLowerCase();else if("string"==typeof e)if(t&&"path"!==t&&"pathname"!==t)"hash"===t||"search"===t?e.length>0&&(e=e[0]+u(e.substr(1),{"?":!0,"#":"hash"===t})):e="host"===t?u(e,{":":!0}):"auth"===t?u(e,{":":!0,"@":!0}):u(e);else{var n,r=e.match(/^(\/\/[^\/]+)(\/.*)?$/);r&&(e=r[2]||""),e=(e=u(e)).replace(/\/\.(\/|$)/g,"$1");do{n=0,e=e.replace(/\/[^\/]+\/\.\.(\/|$)/g,function(e,t){return n+=1,t})}while(n>0);r&&(e=r[1]+e),e=e||"/"}return e}return function(t){var n,r=t&&"object"==typeof t;if(r)n=function(e){for(var t=1;t<arguments.length;t+=1){var n=arguments[t];if(n)for(var r in n)e[r]=n[r]}return e}({},t);else{if(!e||!e.parse){if(/^[\w\+]+:|^\/\//.test(t))throw new Error("Cannot normalize absolute and protocol-relative urls passed as a string without the node.js url module");var o=t.match(/^([^?#]*)(\?[^#]*)?(#(.*))?$/);return c(o[1],"pathname")+c(o[2],"search")+c(o[3],"hash")}n=e.parse(t)}return delete n.href,delete n.path,Object.keys(n).forEach(function(e){n[e]=c(n[e],e)}),r?(e&&(n.href=e.format(n),(n.pathname||n.search)&&(n.path=(n.pathname||"")+(n.search||""))),n):e.format(n)}}(n(38))},function(e,t,n){"use strict";var r=n(39),o=n(41);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=b,t.resolve=function(e,t){return b(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},t.format=function(e){o.isString(e)&&(e=b(e));return e instanceof i?e.format():i.prototype.format.call(e)},t.Url=i;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),h=["%","/","?",";","#"].concat(l),p=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g=n(42);function b(e,t,n){if(e&&o.isObject(e)&&e instanceof i)return e;var r=new i;return r.parse(e,t,n),r}i.prototype.parse=function(e,t,n){if(!o.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),s=-1!==i&&i<e.indexOf("#")?"?":"#",c=e.split(s);c[0]=c[0].replace(/\\/g,"/");var b=e=c.join(s);if(b=b.trim(),!n&&1===e.split("#").length){var E=u.exec(b);if(E)return this.path=b,this.href=b,this.pathname=E[1],E[2]?(this.search=E[2],this.query=t?g.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var _=a.exec(b);if(_){var T=(_=_[0]).toLowerCase();this.protocol=T,b=b.substr(_.length)}if(n||_||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===b.substr(0,2);!w||_&&m[_]||(b=b.substr(2),this.slashes=!0)}if(!m[_]&&(w||_&&!v[_])){for(var S,O,C=-1,R=0;R<p.length;R++){-1!==(k=b.indexOf(p[R]))&&(-1===C||k<C)&&(C=k)}-1!==(O=-1===C?b.lastIndexOf("@"):b.lastIndexOf("@",C))&&(S=b.slice(0,O),b=b.slice(O+1),this.auth=decodeURIComponent(S)),C=-1;for(R=0;R<h.length;R++){var k;-1!==(k=b.indexOf(h[R]))&&(-1===C||k<C)&&(C=k)}-1===C&&(C=b.length),this.host=b.slice(0,C),b=b.slice(C),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var I=this.hostname.split(/\./),P=(R=0,I.length);R<P;R++){var N=I[R];if(N&&!N.match(f)){for(var x="",j=0,L=N.length;j<L;j++)N.charCodeAt(j)>127?x+="x":x+=N[j];if(!x.match(f)){var D=I.slice(0,R),M=I.slice(R+1),U=N.match(d);U&&(D.push(U[1]),M.unshift(U[2])),M.length&&(b="/"+M.join(".")+b),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=r.toASCII(this.hostname));var H=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+H,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!y[T])for(R=0,P=l.length;R<P;R++){var F=l[R];if(-1!==b.indexOf(F)){var q=encodeURIComponent(F);q===F&&(q=escape(F)),b=b.split(F).join(q)}}var W=b.indexOf("#");-1!==W&&(this.hash=b.substr(W),b=b.slice(0,W));var B=b.indexOf("?");if(-1!==B?(this.search=b.substr(B),this.query=b.substr(B+1),t&&(this.query=g.parse(this.query)),b=b.slice(0,B)):t&&(this.search="",this.query={}),b&&(this.pathname=b),v[T]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){H=this.pathname||"";var G=this.search||"";this.path=H+G}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,a="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(a=g.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||v[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+i+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(s=s.replace("#","%23"))+r},i.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(o.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var n=new i,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(n[l]=e[l])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!v[e.protocol]){for(var h=Object.keys(e),p=0;p<h.length;p++){var f=h[p];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||m[e.protocol])n.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var y=n.pathname||"",g=n.search||"";n.path=y+g}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),E=e.host||e.pathname&&"/"===e.pathname.charAt(0),_=E||b||n.host&&e.pathname,T=_,w=n.pathname&&n.pathname.split("/")||[],S=(d=e.pathname&&e.pathname.split("/")||[],n.protocol&&!v[n.protocol]);if(S&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),_=_&&(""===d[0]||""===w[0])),E)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=d;else if(d.length)w||(w=[]),w.pop(),w=w.concat(d),n.search=e.search,n.query=e.query;else if(!o.isNullOrUndefined(e.search)){if(S)n.hostname=n.host=w.shift(),(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift());return n.search=e.search,n.query=e.query,o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var O=w.slice(-1)[0],C=(n.host||e.host||w.length>1)&&("."===O||".."===O)||""===O,R=0,k=w.length;k>=0;k--)"."===(O=w[k])?w.splice(k,1):".."===O?(w.splice(k,1),R++):R&&(w.splice(k,1),R--);if(!_&&!T)for(;R--;R)w.unshift("..");!_||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),C&&"/"!==w.join("/").substr(-1)&&w.push("");var A,I=""===w[0]||w[0]&&"/"===w[0].charAt(0);S&&(n.hostname=n.host=I?"":w.length?w.shift():"",(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift()));return(_=_||n.host&&w.length)&&!I&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){(function(e,r){var o;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(i){t&&t.nodeType,e&&e.nodeType;var a="object"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var s,u=2147483647,c=36,l=1,h=26,p=38,f=700,d=72,y=128,m="-",v=/^xn--/,g=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=c-l,T=Math.floor,w=String.fromCharCode;function S(e){throw new RangeError(E[e])}function O(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function C(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+O((e=e.replace(b,".")).split("."),t).join(".")}function R(e){for(var t,n,r=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function k(e){return O(e,function(e){var t="";return e>65535&&(t+=w((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=w(e)}).join("")}function A(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function I(e,t,n){var r=0;for(e=n?T(e/f):e>>1,e+=T(e/t);e>_*h>>1;r+=c)e=T(e/_);return T(r+(_+1)*e/(e+p))}function P(e){var t,n,r,o,i,a,s,p,f,v,g,b=[],E=e.length,_=0,w=y,O=d;for((n=e.lastIndexOf(m))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&S("not-basic"),b.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<E;){for(i=_,a=1,s=c;o>=E&&S("invalid-input"),((p=(g=e.charCodeAt(o++))-48<10?g-22:g-65<26?g-65:g-97<26?g-97:c)>=c||p>T((u-_)/a))&&S("overflow"),_+=p*a,!(p<(f=s<=O?l:s>=O+h?h:s-O));s+=c)a>T(u/(v=c-f))&&S("overflow"),a*=v;O=I(_-i,t=b.length+1,0==i),T(_/t)>u-w&&S("overflow"),w+=T(_/t),_%=t,b.splice(_++,0,w)}return k(b)}function N(e){var t,n,r,o,i,a,s,p,f,v,g,b,E,_,O,C=[];for(b=(e=R(e)).length,t=y,n=0,i=d,a=0;a<b;++a)(g=e[a])<128&&C.push(w(g));for(r=o=C.length,o&&C.push(m);r<b;){for(s=u,a=0;a<b;++a)(g=e[a])>=t&&g<s&&(s=g);for(s-t>T((u-n)/(E=r+1))&&S("overflow"),n+=(s-t)*E,t=s,a=0;a<b;++a)if((g=e[a])<t&&++n>u&&S("overflow"),g==t){for(p=n,f=c;!(p<(v=f<=i?l:f>=i+h?h:f-i));f+=c)O=p-v,_=c-v,C.push(w(A(v+O%_,0))),p=T(O/_);C.push(w(A(p,0))),i=I(n,E,r==o),n=0,++r}++n,++t}return C.join("")}s={version:"1.4.1",ucs2:{decode:R,encode:k},decode:P,encode:N,toASCII:function(e){return C(e,function(e){return g.test(e)?"xn--"+N(e):e})},toUnicode:function(e){return C(e,function(e){return v.test(e)?P(e.slice(4).toLowerCase()):e})}},void 0===(o=function(){return s}.call(t,n,t,e))||(e.exports=o)}()}).call(this,n(40)(e),n(7))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(43),t.encode=t.stringify=n(44)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,i){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var h,p,f,d,y=e[l].replace(s,"%20"),m=y.indexOf(n);m>=0?(h=y.substr(0,m),p=y.substr(m+1)):(h=y,p=""),f=decodeURIComponent(h),d=decodeURIComponent(p),r(a,f)?o(a[f])?a[f].push(d):a[f]=[a[f],d]:a[f]=d}return a};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?i(a(e),function(a){var s=encodeURIComponent(r(a))+n;return o(e[a])?i(e[a],function(e){return s+encodeURIComponent(r(e))}).join(t):s+encodeURIComponent(r(e[a]))}).join(t):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){(function(){var t,r,o,i={}.hasOwnProperty,a=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},s=[].slice;t=n(10),r=n(17),o=n(9),e.exports=function(e){function n(e,t){if(this._name=e,this._client=t,n.__super__.constructor.apply(this,arguments),this._links={},this._resourcesCache={},!this._name||null==this._client)throw new Error('Don\'t call the Type constructor directly, use `client.type("things");`')}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,t),n.prototype.Resource=r,n.prototype._name="",n.prototype._client=null,n.prototype._links=null,n.prototype._resourcesCache=null,n.prototype.create=function(e,t,n){var r,i,s,u,c;if(null==e&&(e={}),null==t&&(t={}),null==n&&(n={}),e.type&&e.type!==this._name)return(i=this._client.type(e.type)).create.apply(i,arguments);if(u=null!=(s=this._resourcesCache[e.id])?s:new this.Resource(this),o(u._headers,t),o(u._meta,n),null!=e.id){for(r in e)c=e[r],a.call(u._changedKeys,r)<0&&!(r in u._savingKeys)&&(u[r]=c);this._resourcesCache[u.id]=u,u.emit("change")}else u.update(e);return u},n.prototype.get=function(){return new r.Promise("string"==typeof arguments[0]?this._getByID.apply(this,arguments):Array.isArray(arguments[0])?this._getByIDs.apply(this,arguments):this._getByQuery.apply(this,arguments))},n.prototype._getByID=function(){var e,t;return e=arguments[0],t=2<=arguments.length?s.call(arguments,1):[],this._getByIDs.apply(this,[[e]].concat(s.call(t))).then(function(e){return e[0]})},n.prototype._getByIDs=function(){var e,t,n,r;return t=arguments[0],n=2<=arguments.length?s.call(arguments,1):[],r=function(){var r,o,i,a;for(a=[],r=0,o=t.length;r<o;r++)(e=t[r])in this._resourcesCache&&(0===n.length||null==n[0])?a.push(Promise.resolve(this._resourcesCache[e])):a.push((i=this._client).get.apply(i,[this._getURL(e)].concat(s.call(n))).then(function(e){return e[0]}));return a}.call(this),Promise.all(r)},n.prototype._getByQuery=function(){var e,t,n;return t=arguments[0],e=2<=arguments.length?s.call(arguments,1):[],(n=this._client).get.apply(n,[this._getURL(),t].concat(s.call(e)))},n.prototype._getURL=function(){return["",this._name].concat(s.call(arguments)).join("/")},n}()}).call(this)},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,h=-1;function p(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&f())}function f(){if(!l){var e=s(p);l=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new d(e,t)),1!==c.length||l||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){var r=n(8),o=n(11),i=new r(o.host+"/api",{"Content-Type":"application/json",Accept:"application/vnd.api+json; version=1"},{params:o.params,beforeEveryRequest:function(){return n(19).checkBearerToken()},handleError:function(e){var t;if(e instanceof Error)throw e;e.body&&"object"==typeof e.body?e.body.error?(t=e.body.error,e.body.error_description&&(t+=" "+e.error_description)):t=Array.isArray(e.body.errors)?e.body.errors.map(function(e){return"string"==typeof e.message?e.message:"object"==typeof e.message?Object.keys(e.message).map(function(t){return t+" "+e.message[t]}).join("\n"):void 0}).join("\n"):"Unknown error (bad response body)":t="Unknown error (bad response)";var n=new Error(t);throw n.status=e.status,n.statusText=e.statusText,n}});e.exports=i},function(e,t,n){var r=t;r.utils=n(2),r.common=n(6),r.sha=n(50),r.ripemd=n(54),r.hmac=n(55),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";t.sha1=n(51),t.sha224=n(52),t.sha256=n(21),t.sha384=n(53),t.sha512=n(22)},function(e,t,n){"use strict";var r=n(2),o=n(6),i=n(20),a=r.rotl32,s=r.sum32,u=r.sum32_5,c=i.ft_1,l=o.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function p(){if(!(this instanceof p))return new p;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}r.inherits(p,l),e.exports=p,p.blockSize=512,p.outSize=160,p.hmacStrength=80,p.padLength=64,p.prototype._update=function(e,t){for(var n=this.W,r=0;r<16;r++)n[r]=e[t+r];for(;r<n.length;r++)n[r]=a(n[r-3]^n[r-8]^n[r-14]^n[r-16],1);var o=this.h[0],i=this.h[1],l=this.h[2],p=this.h[3],f=this.h[4];for(r=0;r<n.length;r++){var d=~~(r/20),y=u(a(o,5),c(d,i,l,p),f,n[r],h[d]);f=p,p=l,l=a(i,30),i=o,o=y}this.h[0]=s(this.h[0],o),this.h[1]=s(this.h[1],i),this.h[2]=s(this.h[2],l),this.h[3]=s(this.h[3],p),this.h[4]=s(this.h[4],f)},p.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(e,t,n){"use strict";var r=n(2),o=n(21);function i(){if(!(this instanceof i))return new i;o.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}r.inherits(i,o),e.exports=i,i.blockSize=512,i.outSize=224,i.hmacStrength=192,i.padLength=64,i.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}},function(e,t,n){"use strict";var r=n(2),o=n(22);function i(){if(!(this instanceof i))return new i;o.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r.inherits(i,o),e.exports=i,i.blockSize=1024,i.outSize=384,i.hmacStrength=192,i.padLength=128,i.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}},function(e,t,n){"use strict";var r=n(2),o=n(6),i=r.rotl32,a=r.sum32,s=r.sum32_3,u=r.sum32_4,c=o.BlockHash;function l(){if(!(this instanceof l))return new l;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function h(e,t,n,r){return e<=15?t^n^r:e<=31?t&n|~t&r:e<=47?(t|~n)^r:e<=63?t&r|n&~r:t^(n|~r)}function p(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function f(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}r.inherits(l,c),t.ripemd160=l,l.blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(e,t){for(var n=this.h[0],r=this.h[1],o=this.h[2],c=this.h[3],l=this.h[4],g=n,b=r,E=o,_=c,T=l,w=0;w<80;w++){var S=a(i(u(n,h(w,r,o,c),e[d[w]+t],p(w)),m[w]),l);n=l,l=c,c=i(o,10),o=r,r=S,S=a(i(u(g,h(79-w,b,E,_),e[y[w]+t],f(w)),v[w]),T),g=T,T=_,_=i(E,10),E=b,b=S}S=s(this.h[1],o,_),this.h[1]=s(this.h[2],c,T),this.h[2]=s(this.h[3],l,g),this.h[3]=s(this.h[4],n,b),this.h[4]=s(this.h[0],r,E),this.h[0]=S},l.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],y=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(e,t,n){"use strict";var r=n(2),o=n(5);function i(e,t,n){if(!(this instanceof i))return new i(e,t,n);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(t,n))}e.exports=i,i.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),o(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},i.prototype.update=function(e,t){return this.inner.update(e,t),this},i.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(23),a=n.n(i);function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var u=n(1),c=n.n(u),l=o.a.createContext(null),h=function(e){function t(t){var n;n=e.call(this,t)||this;var r=t.store;return n.state={storeState:r.getState(),store:r},n}s(t,e);var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this.subscribe()},n.componentWillUnmount=function(){this.unsubscribe&&this.unsubscribe(),this._isMounted=!1},n.componentDidUpdate=function(e){this.props.store!==e.store&&(this.unsubscribe&&this.unsubscribe(),this.subscribe())},n.subscribe=function(){var e=this,t=this.props.store;this.unsubscribe=t.subscribe(function(){var n=t.getState();e._isMounted&&e.setState(function(e){return e.storeState===n?null:{storeState:n}})});var n=t.getState();n!==this.state.storeState&&this.setState({storeState:n})},n.render=function(){var e=this.props.context||l;return o.a.createElement(e.Provider,{value:this.state},this.props.children)},t}(r.Component);h.propTypes={store:c.a.shape({subscribe:c.a.func.isRequired,dispatch:c.a.func.isRequired,getState:c.a.func.isRequired}),context:c.a.object,children:c.a.any};var p=h;function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}var y=n(13),m=n.n(y),v=n(4),g=n.n(v),b=n(12);function E(e,t){void 0===t&&(t={});var n=t,i=n.getDisplayName,a=void 0===i?function(e){return"ConnectAdvanced("+e+")"}:i,u=n.methodName,c=void 0===u?"connectAdvanced":u,h=n.renderCountProp,p=void 0===h?void 0:h,y=n.shouldHandleStateChanges,v=void 0===y||y,E=n.storeKey,_=void 0===E?"store":E,T=n.withRef,w=void 0!==T&&T,S=n.forwardRef,O=void 0!==S&&S,C=n.context,R=void 0===C?l:C,k=d(n,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]);g()(void 0===p,"renderCountProp is removed. render counting is built into the latest React dev tools profiling extension"),g()(!w,"withRef is removed. To access the wrapped instance, use a ref on the connected component");var A="To use a custom Redux store for specific components,  create a custom React context with React.createContext(), and pass the context object to React Redux's Provider and specific components like:  <Provider context={MyContext}><ConnectedComponent context={MyContext} /></Provider>. You may also pass a {context : MyContext} option to connect";g()("store"===_,"storeKey has been removed and does not do anything. "+A);var I=R;return function(t){var n=t.displayName||t.name||"Component",i=a(n),u=f({},k,{getDisplayName:a,methodName:c,renderCountProp:p,shouldHandleStateChanges:v,storeKey:_,displayName:i,wrappedComponentName:n,WrappedComponent:t}),l=k.pure,h=r.Component;l&&(h=r.PureComponent);var d=function(n){function r(t){var r,i,a,s,u,c,h,p,d,y,m;return r=n.call(this,t)||this,g()(O?!t.wrapperProps[_]:!t[_],"Passing redux store in props has been removed and does not do anything. "+A),r.selectDerivedProps=function(t,n,r,o){if(l&&i===n&&a===t)return s;r===u&&c===o||(u=r,c=o,h=e(r.dispatch,o)),i=n,a=t;var p=h(t,n);return s=p},r.selectChildElement=function(e,t,n){return t===p&&n===d&&m===e||(p=t,d=n,m=e,y=o.a.createElement(e,f({},t,{ref:n}))),y},r.indirectRenderWrappedComponent=r.indirectRenderWrappedComponent.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r)),r}s(r,n);var a=r.prototype;return a.indirectRenderWrappedComponent=function(e){return this.renderWrappedComponent(e)},a.renderWrappedComponent=function(e){g()(e,'Could not find "store" in the context of "'+i+'". Either wrap the root component in a <Provider>, or pass a custom React context provider to <Provider> and the corresponding React context consumer to '+i+" in connect options.");var n,r=e.storeState,o=e.store,a=this.props;O&&(a=this.props.wrapperProps,n=this.props.forwardedRef);var s=this.selectDerivedProps(r,a,o,u);return this.selectChildElement(t,s,n)},a.render=function(){var e=this.props.context&&this.props.context.Consumer&&Object(b.isContextConsumer)(o.a.createElement(this.props.context.Consumer,null))?this.props.context:I;return o.a.createElement(e.Consumer,null,this.indirectRenderWrappedComponent)},r}(h);if(d.WrappedComponent=t,d.displayName=i,O){var y=o.a.forwardRef(function(e,t){return o.a.createElement(d,{wrapperProps:e,forwardedRef:t})});return y.displayName=i,y.WrappedComponent=t,m()(y,t)}return m()(d,t)}}var _=Object.prototype.hasOwnProperty;function T(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function w(e,t){if(T(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!_.call(t,n[o])||!T(e[n[o]],t[n[o]]))return!1;return!0}var S=n(14),O=function(){return Math.random().toString(36).substring(7).split("").join(".")},C={INIT:"@@redux/INIT"+O(),REPLACE:"@@redux/REPLACE"+O(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+O()}};function R(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function k(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(k)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var o=e,i=t,a=[],s=a,u=!1;function c(){s===a&&(s=a.slice())}function l(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return i}function h(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var t=!0;return c(),s.push(e),function(){if(t){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,c();var n=s.indexOf(e);s.splice(n,1)}}}function p(e){if(!R(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,i=o(i,e)}finally{u=!1}for(var t=a=s,n=0;n<t.length;n++){(0,t[n])()}return e}return p({type:C.INIT}),(r={dispatch:p,subscribe:h,getState:l,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");o=e,p({type:C.REPLACE})}})[S.a]=function(){var e,t=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[S.a]=function(){return this},e},r}function A(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function I(e,t){return function(){return t(e.apply(this,arguments))}}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},i=t.map(function(e){return e(o)});return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){P(e,t,n[t])})}return e}({},n,{dispatch:r=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}.apply(void 0,i)(n.dispatch)})}}}function x(e){return function(t,n){var r=e(t,n);function o(){return r}return o.dependsOnOwnProps=!1,o}}function j(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function L(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=j(e);var o=r(t,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=j(o),o=r(t,n)),o},r}}var D=[function(e){return"function"==typeof e?L(e):void 0},function(e){return e?void 0:x(function(e){return{dispatch:e}})},function(e){return e&&"object"==typeof e?x(function(t){return function(e,t){if("function"==typeof e)return I(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},o=0;o<n.length;o++){var i=n[o],a=e[i];"function"==typeof a&&(r[i]=I(a,t))}return r}(e,t)}):void 0}];var M=[function(e){return"function"==typeof e?L(e):void 0},function(e){return e?void 0:x(function(){return{}})}];function U(e,t,n){return f({},n,e,t)}var H=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,o=n.pure,i=n.areMergedPropsEqual,a=!1;return function(t,n,s){var u=e(t,n,s);return a?o&&i(u,r)||(r=u):(a=!0,r=u),r}}}(e):void 0},function(e){return e?void 0:function(){return U}}];function z(e,t,n,r){return function(o,i){return n(e(o,i),t(r,i),i)}}function F(e,t,n,r,o){var i,a,s,u,c,l=o.areStatesEqual,h=o.areOwnPropsEqual,p=o.areStatePropsEqual,f=!1;function d(o,f){var d,y,m=!h(f,a),v=!l(o,i);return i=o,a=f,m&&v?(s=e(i,a),t.dependsOnOwnProps&&(u=t(r,a)),c=n(s,u,a)):m?(e.dependsOnOwnProps&&(s=e(i,a)),t.dependsOnOwnProps&&(u=t(r,a)),c=n(s,u,a)):v?(d=e(i,a),y=!p(d,s),s=d,y&&(c=n(s,u,a)),c):c}return function(o,l){return f?d(o,l):(s=e(i=o,a=l),u=t(r,a),c=n(s,u,a),f=!0,c)}}function q(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,o=t.initMergeProps,i=d(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(e,i),s=r(e,i),u=o(e,i);return(i.pure?F:z)(a,s,u,e,i)}function W(e,t,n){for(var r=t.length-1;r>=0;r--){var o=t[r](e);if(o)return o}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function B(e,t){return e===t}var G,K,V,$,J,Z,Y,X,Q,ee,te,ne,re=(V=(K=void 0===G?{}:G).connectHOC,$=void 0===V?E:V,J=K.mapStateToPropsFactories,Z=void 0===J?M:J,Y=K.mapDispatchToPropsFactories,X=void 0===Y?D:Y,Q=K.mergePropsFactories,ee=void 0===Q?H:Q,te=K.selectorFactory,ne=void 0===te?q:te,function(e,t,n,r){void 0===r&&(r={});var o=r,i=o.pure,a=void 0===i||i,s=o.areStatesEqual,u=void 0===s?B:s,c=o.areOwnPropsEqual,l=void 0===c?w:c,h=o.areStatePropsEqual,p=void 0===h?w:h,y=o.areMergedPropsEqual,m=void 0===y?w:y,v=d(o,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),g=W(e,Z,"mapStateToProps"),b=W(t,X,"mapDispatchToProps"),E=W(n,ee,"mergeProps");return $(ne,f({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:g,initMapDispatchToProps:b,initMergeProps:E,pure:a,areStatesEqual:u,areOwnPropsEqual:l,areStatePropsEqual:p,areMergedPropsEqual:m},v))});function oe(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(o){return"function"==typeof o?o(n,r,e):t(o)}}}}var ie=oe();ie.withExtraArgument=oe;var ae=ie;n(29);function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ue(e){var t=document.querySelector("[tabIndex='"+e+"']");t&&!t.disabled&&t.focus()}function ce(e){e.select(),e.setSelectionRange(0,e.value.length,"backward")}function le(e){var t=e.reduce(function(e,t){var n=se(t,2),r=n[0];return n[1]&&e.push(r),e},[]);return 0===t.length?null:t.join(" ")}function he(){for(var e=arguments[0],t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function pe(e,t){t.hasOwnProperty(e)?t[e]():t.hasOwnProperty("default")&&t.default()}function fe(e,t){var n=e+"/",r={};for(var o in t)r[o]=n+t[o];return r}function de(){return new Date}var ye=n(3),me=n.n(ye),ve=function(e){var t;"undefined"!=typeof location&&null!==location&&(t=location.search.match(e));return t&&t[1]?t[1]:void 0}(/\W?env=(\w+)/)||"production";if(!ve.match(/^(production|staging|development)$/))throw new Error("Error: Invalid Environment - ".concat(ve));var ge={development:{zooniverseLinks:{host:"https://master.pfe-preview.zooniverse.org/",projectId:"7859",projectSlug:"edh/weather-rescue",projectLinkBase:"https://www.zooniverse.org/projects/edh/weather-rescue"}},production:{zooniverseLinks:{host:"https://www.zooniverse.org/",projectId:"7859",projectSlug:"edh/weather-rescue",projectLinkBase:"https://www.zooniverse.org/projects/edh/weather-rescue"}}};ge.staging=ge.development;var be=ge[ve];var Ee=fe("project",{FETCH_PROJECT:"FETCH_PROJECT",FETCH_PROJECT_SUCCESS:"FETCH_PROJECT_SUCCESS",FETCH_PROJECT_ERROR:"FETCH_PROJECT_ERROR"}),_e={IDLE:"IDLE",FETCHING:"FETCHING",READY:"READY",ERROR:"ERROR"};function Te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be.zooniverseLinks.projectId;return function(t){return t({type:Ee.FETCH_PROJECT,id:e}),me.a.type("projects").get(e).then(function(e){return t((n=e,{type:Ee.FETCH_PROJECT_SUCCESS,data:n}));var n}).catch(function(e){return t(function(e){return{type:Ee.FETCH_PROJECT_ERROR,error:e}}(e))})}}var we={status:_e.IDLE,id:"",data:null,error:null};var Se=fe("workflow",{FETCH_WORKFLOW:"FETCH_WORKFLOW",FETCH_WORKFLOW_SUCCESS:"FETCH_WORKFLOW_SUCCESS",FETCH_WORKFLOW_ERROR:"FETCH_WORKFLOW_ERROR",SET_WORKFLOW:"SET_WORKFLOW",FETCH_ACTIVE_WORKFLOWS:"FETCH_ACTIVE_WORKFLOWS",FETCH_ACTIVE_WORKFLOWS_SUCCESS:"FETCH_ACTIVE_WORKFLOWS_SUCCESS",FETCH_ACTIVE_WORKFLOWS_ERROR:"FETCH_ACTIVE_WORKFLOWS_ERROR"}),Oe={IDLE:"IDLE",FETCHING:"FETCHING",ACTIVE_WORKFLOWS_READY:"ACTIVE_WORKFLOWS_READY",ACTIVE_WORKFLOWS_EMPTY:"ACTIVE_WORKFLOWS_EMPTY",WORKFLOW_READY:"WORKFLOW_READY",ERROR:"ERROR"};function Ce(e){return{type:Se.SET_WORKFLOW,id:e}}function Re(){return function(e,t){var n=t().workflow.currentId;return e({type:Se.FETCH_WORKFLOW}),me.a.type("workflows").get(n,{http_cache:!1}).then(function(t){return e((n=t,{type:Se.FETCH_WORKFLOW_SUCCESS,data:n}));var n}).catch(function(t){return e(function(e){return{type:Se.FETCH_WORKFLOW_ERROR,error:e}}(t))})}}function ke(){return function(e,t){var n=t().project.id;return e({type:Se.FETCH_ACTIVE_WORKFLOWS}),me.a.type("workflows").get({project_id:n,active:!0,fields:"display_name"}).then(function(t){return e((n=t,{type:Se.FETCH_ACTIVE_WORKFLOWS_SUCCESS,data:n}));var n}).catch(function(t){return e(function(e){return{type:Se.FETCH_ACTIVE_WORKFLOWS_ERROR,error:e}}(t))})}}var Ae={status:Oe.IDLE,currentId:"",currentWorkflow:null,activeWorkflows:[],error:null};var Ie=fe("subject",{FETCH_SUBJECT_QUEUE:"FETCH_SUBJECT_QUEUE",FETCH_SUBJECT_QUEUE_SUCCESS:"FETCH_SUBJECT_QUEUE_SUCCESS",FETCH_SUBJECT_QUEUE_ERROR:"FETCH_SUBJECT_QUEUE_ERROR",SET_SUBJECT_SET:"SET_SUBJECT_SET",NEXT_SUBJECT:"NEXT_SUBJECT",RESET:"RESET_SUBJECT"}),Pe={IDLE:"IDLE",FETCHING:"FETCHING",READY:"READY",ERROR:"ERROR"};function Ne(e){return{type:Ie.SET_SUBJECT_SET,id:e}}function xe(){return{type:Ie.NEXT_SUBJECT}}var je={currentSubject:null,subjectSet:"",status:Pe.IDLE,queue:[],error:null};var Le=fe("image",{FETCH_IMAGE:"FETCH_IMAGE",FETCH_IMAGE_SUCCESS:"FETCH_IMAGE_SUCCESS",FETCH_IMAGE_ERROR:"FETCH_IMAGE_ERROR",SET_IMAGE_METADATA:"SET_IMAGE_METADATA",RESET_IMAGE:"RESET_IMAGE"}),De={IDLE:"IDLE",FETCHING:"FETCHING",READY:"READY",ERROR:"ERROR"};var Me={status:De.IDLE,src:null,img:null,error:null,imageMetadata:null};function Ue(e){try{sessionStorage.setItem("session_id",JSON.stringify(e))}catch(e){console.error(e)}}function He(){var e={id:n(48).sha256().update(""+1e4*Math.random()+Date.now()+1e3*Math.random()).digest("hex"),ttl:ze()};return Ue(e),e}function ze(){var e=new Date;return e.setMinutes(e.getMinutes()+5),e}var Fe=fe("classification",{START_CLASSIFICATION:"START_CLASSIFICATION",SUBMIT_CLASSIFICATION:"SUBMIT_CLASSIFICATION",SUBMIT_CLASSIFICATION_SUCCESS:"SUBMIT_CLASSIFICATION_SUCCESS",SUBMIT_CLASSIFICATION_ERROR:"SUBMIT_CLASSIFICATION_ERROR",COMPLETE_CLASSIFICATION:"COMPLETE_CLASSIFICATION"}),qe={IDLE:"IDLE",SENDING:"SENDING",SUCCESS:"SUCCESS",ERROR:"ERROR"};var We={currentClassification:null,status:qe.IDLE,error:null};var Be=fe("task",{SET_LOCATION_TITLE:"SET_LOCATION_TITLE",BEGIN_UPDATE_VALUE:"BEGIN_UPDATE_VALUE",UPDATE_VALUE:"UPDATE_VALUE",END_UPDATE_VALUE:"END_UPDATE_VALUE",NEXT_STEP:"NEXT_STEP",PREVIOUS_STEP:"PREVIOUS_STEP",NEXT_SUBJECT:"NEXT_SUBJECT",RESET:"RESET"}),Ge={INIT:"INIT",TRANSCRIBE:"TRANSCRIBE",SUMMARY:"SUMMARY"};function Ke(){return{type:Be.NEXT_STEP}}var Ve,$e={TEMPERATURE:"TEMPERATURE",PRESSURE:"PRESSURE",RAINFALL:"RAINFALL"};function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ze(e){return new RegExp("^\\??"+e.join("")+"$")}function Ye(e){return e.reduce(function(e,t){return e.concat(function(e){return e.reduce(function(e,t,n){return e.push(e[n]+t),e},["^\\??"]).map(function(e){return new RegExp(e+"$")})}(t))},[])}function Xe(e){return e?[]:["Does not match expected pattern"]}var Qe=[/^\\??$/],et=[/^$/];function tt(e){var t=Ye(e).concat(Qe),n=function(e){return e.map(Ze)}(e).concat(et);return{partial:function(e){return function(e,t){return Xe(e.some(function(e){return e.test(t)}))}(t,e)},full:function(e){return function(e,t){return Xe(e.some(function(e){return e.test(t)}))}(n,e)}}}var nt,rt=(Je(Ve={},$e.PRESSURE,tt([["2","(7|8|9)","\\.","\\d","\\d"],["3","(0|1)","\\.","\\d","\\d"]])),Je(Ve,$e.TEMPERATURE,tt([["0"],["-?","[1-9]","\\d*"]])),Je(Ve,$e.RAINFALL,tt([["0"],["-"],["0","\\.","\\d","\\d"],["[1-9]","\\d*","\\.","\\d","\\d"]])),Ve);function ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function it(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(e,t){return e.reduce(function(e,t){return t(e)},t)}(t,e)}}var at,st,ut=[(at="+",st="?",function(e){return e===at?st:e})],ct=(ot(nt={},$e.PRESSURE,it.apply(void 0,[function(e){var t=/^(\??0)(\d)$/,n=/^(\??\d\d)(\d)$/;if(t.test(e)){var r=e.match(t);return r[1]+"."+r[2]}if(/^(\??0)\.(\d\d\d)$/.test(e))return e;if(n.test(e)){var o=e.match(n);return o[1]+"."+o[2]}return e}].concat(ut))),ot(nt,$e.TEMPERATURE,it.apply(void 0,ut)),ot(nt,$e.RAINFALL,it.apply(void 0,[function(e){var t=/^(\??0)(\d)$/,n=/^(\??\d)(\d)$/,r=/^(\??\d+)\.(\d)(\d\d)$/;if(t.test(e)){var o=e.match(t);return o[1]+"."+o[2]}if(/^(\??0)\.(\d\d\d)$/.test(e))return e;if(n.test(e)){var i=e.match(n);return i[1]+"."+i[2]}if(r.test(e)){var a=e.match(r);return a[1]+a[2]+"."+a[3]}return e}].concat(ut))),nt);function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ht(e){return{type:e,value:"",focused:!1,partialErrors:[],fullErrors:[]}}function pt(){return{status:Ge.INIT,locationTitle:"",pressure:ht($e.PRESSURE),dryTemperature:ht($e.TEMPERATURE),wetTemperature:ht($e.TEMPERATURE),maxTemperature:ht($e.TEMPERATURE),minTemperature:ht($e.TEMPERATURE),rainfall:ht($e.RAINFALL),valuesOk:!0}}var ft=fe("router",{NAVIGATE:"NAVIGATE"});var dt={route:""};var yt,mt=fe("viewer",{SET_ZOOM_VALUE:"SET_ZOOM_VALUE",SET_ERROR:"SET_ERROR",CLEAR_ERROR:"CLEAR_ERROR",APPLY_ROTATION:"APPLY_ROTATION",SET_VIEWER_SIZE:"SET_VIEWER_SIZE",SET_PAN:"SET_PAN",RESET_PAN:"RESET_PAN",RESET:"RESET"});function vt(e){return{type:mt.APPLY_ROTATION,delta:e}}function gt(e){return{type:mt.SET_PAN,pan:e}}function bt(){return{type:mt.RESET}}function Et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _t=fe("subjectViewer",{SET_TOOL:"SET_TOOL",SET_SUBTOOL:"SET_SUBTOOL",SET_HIGHLIGHT_ON:"SET_HIGHLIGHT_ON",SET_HIGHLIGHT_SIZE:"SET_HIGHLIGHT_SIZE",ADD_ANNOTATION:"ADD_ANNOTATION",UPDATE_ANNOTATION:"UPDATE_ANNOTATION",REMOVE_ANNOTATION:"REMOVE_ANNOTATION",RESET_ANNOTATIONS:"RESET_ANNOTATIONS"}),Tt={ANNOTATE:"ANNOTATE",PAN:"PAN"},wt=(Et(yt={},Tt.ANNOTATE,{LINE:"LINE",RECTANGLE:"RECTANGLE",MOVE:"MOVE",EDIT:"EDIT",DELETE:"DELETE"}),Et(yt,Tt.PAN,{ALL:"ALL",VERTICAL:"VERTICAL",HORIZONTAL:"HORIZONTAL"}),yt);function St(e){return{type:_t.SET_SUBTOOL,subTool:e}}function Ot(e){return{type:_t.SET_HIGHLIGHT_SIZE,size:e}}function Ct(e){return{type:_t.ADD_ANNOTATION,annotation:e}}function Rt(e,t){return{type:_t.UPDATE_ANNOTATION,id:e,annotation:t}}function kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function At(e,t){var n=kt(e,2),r=n[0],o=n[1],i=kt(t,2);return[r+i[0],o+i[1]]}function It(e,t){var n=kt(e,2);return[t*n[0],t*n[1]]}function Pt(e){var t=kt(e,2),n=t[0],r=t[1],o=kt(n,2),i=o[0],a=o[1],s=kt(r,2),u=s[0],c=s[1];if(i>u){var l=i;i=u,u=l}if(a>c){var h=a;a=c,c=h}return[[i,a],[u,c]]}function Nt(e,t){var n=kt(e,2),r=n[0],o=n[1];return[At(r,t),At(o,t)]}function xt(e,t){var n=kt(e,2),r=kt(n[0],2),o=r[0],i=r[1],a=kt(n[1],2);return[[t*o,t*i],[t*a[0],t*a[1]]]}function jt(e,t){var n=kt(e,2),r=kt(n[0],3),o=r[0],i=r[1],a=r[2],s=kt(n[1],3),u=s[0],c=s[1],l=s[2],h=kt(t,2),p=h[0],f=h[1];return[o*p+i*f+a,u*p+c*f+l]}function Lt(e,t){var n=kt(e,2),r=kt(n[0],3),o=r[0],i=r[1],a=r[2],s=kt(n[1],3),u=s[0],c=s[1],l=s[2],h=kt(t,2),p=kt(h[0],3),f=p[0],d=p[1],y=p[2],m=kt(h[1],3),v=m[0],g=m[1],b=m[2];return[[o*f+i*v,o*d+i*g,o*y+i*b+a],[u*f+c*v,u*d+c*g,u*y+c*b+l]]}function Dt(e,t){var n=kt(t,2),r=n[0],o=n[1];switch(e){case 0:return[[1,0,0],[0,1,0]];case 1:return[[0,1,0],[-1,0,o]];case 2:return[[-1,0,r],[0,-1,o]];case 3:return[[0,-1,r],[1,0,0]]}}function Mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ut(e){var t=e.rotation,n=Mt(e.imageSize,2),r=n[0],o=n[1];return t%2==0?[r,o]:[o,r]}function Ht(e,t,n,r,o,i,a,s){if(null===a)return e;var u=Dt(o,It(t,n)),c=Dt(i,It(t,r)),l=It(a,.5),h=It(s,.5),p=Mt(jt(u,l),2),f=p[0],d=p[1],y=Mt(jt(c,h),2),m=y[0],v=y[1],g=Mt(e,2);return[g[0]+m/r-f/n,g[1]+v/r-d/n]}function zt(e){var t,n=e.zoomScale,r=e.zoomValue,o=e.imageSize,i=e.viewerSize;return pe(r,{"actual-size":function(){t=1},"fit-height":function(){if(null===o||null===i)t=n;else{var r=Mt(Ut(e),2),a=r[0],s=r[1],u=Mt(i,2),c=u[0],l=u[1];t=Math.min(1/0,c/a,l/s)}},"fit-width":function(){if(null===o||null===i)t=n;else{var r=Mt(Ut(e),1)[0],a=Mt(i,1)[0];t=a/r}},default:function(){var e=parseInt(r);t=e/100}}),t}function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wt(){var e;return{tool:Tt.PAN,subTools:(e={},qt(e,Tt.ANNOTATE,wt.ANNOTATE.MOVE),qt(e,Tt.PAN,wt.PAN.VERTICAL),e),highlight:{on:!1,defaultSize:50,size:50},annotations:{nextId:1,map:{}}}}var Bt=1/35;function Gt(e,t){var n=function(e){return Math.round(Bt*e)}(Ft(t.size,1)[0]),r=he({},e.highlight,{size:n,defaultSize:n});return he({},e,{highlight:r})}var Kt,Vt,$t=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var o=t[r];"function"==typeof e[o]&&(n[o]=e[o])}var i,a=Object.keys(n);try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:C.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:C.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+C.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(n)}catch(e){i=e}return function(e,t){if(void 0===e&&(e={}),i)throw i;for(var r=!1,o={},s=0;s<a.length;s++){var u=a[s],c=n[u],l=e[u],h=c(l,t);if(void 0===h){var p=A(u,t);throw new Error(p)}o[u]=h,r=r||h!==l}return r?o:e}}({project:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ee.FETCH_PROJECT:return function(e,t){return he({},e,{status:_e.FETCHING,id:t.id,data:null})}(e,t);case Ee.FETCH_PROJECT_SUCCESS:return function(e,t){return he({},e,{status:_e.READY,data:t.data})}(e,t);case Ee.FETCH_PROJECT_ERROR:return function(e,t){return he({},e,{status:_e.ERROR,error:t.error})}(e,t);default:return e}},workflow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Se.FETCH_WORKFLOW:return function(e){return he({},e,{status:Oe.FETCHING,currentWorkflow:null})}(e);case Se.FETCH_WORKFLOW_SUCCESS:return function(e,t){return he({},e,{status:Oe.WORKFLOW_READY,currentWorkflow:t.data})}(e,t);case Se.FETCH_WORKFLOW_ERROR:return function(e,t){return he({},e,{status:Oe.ERROR,error:t.error})}(e,t);case Se.SET_WORKFLOW:return function(e,t){return he({},e,{currentId:t.id})}(e,t);case Se.FETCH_ACTIVE_WORKFLOWS:return he({},Ae,{status:Oe.FETCHING});case Se.FETCH_ACTIVE_WORKFLOWS_SUCCESS:return function(e,t){var n=t.data.map(function(e){return{id:e.id,displayName:e.display_name}});return he({},e,{status:0===(n=n.filter(function(e){var t=e.displayName;return/^\w+-3$/.test(t)})).length?Oe.ACTIVE_WORKFLOWS_EMPTY:Oe.ACTIVE_WORKFLOWS_READY,activeWorkflows:n})}(e,t);case Se.FETCH_ACTIVE_WORKFLOWS_ERROR:return function(e,t){return he({},e,{status:Oe.ERROR,error:t.error})}(e,t);default:return e}},subject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ie.FETCH_SUBJECT_QUEUE:return function(e){return he({},e,{status:Pe.FETCHING,currentSubject:null,queue:[]})}(e);case Ie.FETCH_SUBJECT_QUEUE_SUCCESS:return function(e,t){return he({},e,{status:Pe.READY,queue:t.queue})}(e,t);case Ie.FETCH_SUBJECT_QUEUE_ERROR:return function(e,t){return he({},e,{status:Pe.ERROR,error:t.error})}(e,t);case Ie.RESET:return je;case Ie.SET_SUBJECT_SET:return function(e,t){return he({},je,{subjectSet:t.id})}(0,t);case Ie.NEXT_SUBJECT:return function(e){var t=e.queue.slice(0);return he({},e,{currentSubject:t.shift(),queue:t})}(e);default:return e}},image:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Le.FETCH_IMAGE:return function(e){return he({},Me,{status:De.FETCHING,src:e.src,img:null})}(t);case Le.FETCH_IMAGE_SUCCESS:return function(e,t){return he({},e,{img:t.img,status:De.READY})}(e,t);case Le.FETCH_IMAGE_ERROR:return function(e,t){return he({},e,{status:De.ERROR,error:t.error})}(e,t);case Le.SET_IMAGE_METADATA:return function(e,t){return he({},e,{imageMetadata:t.imageMetadata})}(e,t);case Le.RESET_IMAGE:return Me;default:return e}},classification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Fe.START_CLASSIFICATION:return function(e){return he({},We,{currentClassification:e.data,status:qe.IDLE})}(t);case Fe.SUBMIT_CLASSIFICATION:return function(e){return he({},e,{status:qe.SENDING})}(e);case Fe.SUBMIT_CLASSIFICATION_SUCCESS:return We;case Fe.SUBMIT_CLASSIFICATION_ERROR:return function(e,t){return he({},e,{status:qe.ERROR,error:t.error})}(e,t);case Fe.COMPLETE_CLASSIFICATION:return function(e,t){var n=t.update,r=he({},e.currentClassification,{annotations:n.annotations,metadata:he({},e.currentClassification.metadata,n.metadata)});return he({},e,{currentClassification:r})}(e,t);default:return e}},task:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Be.SET_LOCATION_TITLE:return function(e,t){var n=t.workflow.display_name,r=n.indexOf("-");return he({},e,{locationTitle:r>-1?n.substring(0,r):n})}(e,t);case Be.BEGIN_UPDATE_VALUE:return function(e,t){var n=t.name,r=e[n],o=he({},r,{focused:!0,partialErrors:r.fullErrors});return he({},e,lt({},n,o))}(e,t);case Be.UPDATE_VALUE:return function(e,t){var n=t.name,r=e[n],o=rt[r.type],i=(0,ct[r.type])(t.value),a=he({},r,{value:i,partialErrors:o.partial(i),fullErrors:o.full(i)});return he({},e,lt({},n,a))}(e,t);case Be.END_UPDATE_VALUE:return function(e,t){var n,r=t.name,o=he({},e[r],{focused:!1,partialErrors:[]});return he({},e,(lt(n={},r,o),lt(n,"valuesOk",function(e){return["pressure","dryTemperature","wetTemperature","maxTemperature","minTemperature","rainfall"].reduce(function(t,n){return t&&0===e[n].fullErrors.length},!0)}(e)),n))}(e,t);case Be.NEXT_STEP:return function(e){var t=null;switch(e.status){case Ge.INIT:t=Ge.TRANSCRIBE;break;case Ge.TRANSCRIBE:t=Ge.SUMMARY;break;case Ge.SUMMARY:throw new Error("No next step from SUMMARY")}return he({},e,{status:t})}(e);case Be.PREVIOUS_STEP:return function(e){var t=null;switch(e.status){case Ge.INIT:throw new Error("No previous step from INIT");case Ge.TRANSCRIBE:throw new Error("No previous step from TRANSCRIBE");case Ge.SUMMARY:t=Ge.TRANSCRIBE}return he({},e,{status:t})}(e);case Be.NEXT_SUBJECT:return function(e){return he(pt(),{locationTitle:e.locationTitle})}(e);case Be.RESET:return pt();default:return e}},router:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ft.NAVIGATE:return function(e,t){return he({},e,{route:t.route})}(e,t);default:return e}},viewer:(Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{zoomValue:"fit-width",zoomScale:1,rotation:0,pan:[0,0],viewerSize:null,imageSize:null,error:null,maintainCentre:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case mt.SET_ZOOM_VALUE:return function(e,t){var n=e.zoomScale,r=e.viewerSize,o=e.pan,i=e.imageSize,a=e.rotation,s=e.maintainCentre,u=he({},e,{zoomValue:t.zoomValue}),c=zt(u);return he(u,{zoomScale:c,pan:s?Ht(o,i,n,c,a,a,r,r):o})}(e,t);case mt.APPLY_ROTATION:return function(e,t){var n=e.zoomScale,r=e.viewerSize,o=e.pan,i=e.imageSize,a=e.rotation,s=e.maintainCentre,u=(a+t.delta+4)%4,c=he({},e,{rotation:u}),l=zt(c);return he(c,{zoomScale:l,pan:s?Ht(o,i,n,l,a,u,r,r):o})}(e,t);case mt.SET_PAN:return function(e,t){return he({},e,{pan:t.pan})}(e,t);case mt.RESET_PAN:return function(e){return he({},e,{pan:[0,0]})}(e);case mt.SET_VIEWER_SIZE:return function(e,t){var n=e.zoomScale,r=e.viewerSize,o=e.pan,i=e.imageSize,a=e.rotation,s=e.maintainCentre,u=t.size,c=he({},e,{viewerSize:u}),l=zt(c);return he(c,{zoomScale:l,pan:s?Ht(o,i,n,l,a,a,r,u):o})}(e,t);case Le.FETCH_IMAGE_SUCCESS:return function(e,t){var n=t.img;return he({},e,{imageSize:[n.naturalWidth,n.naturalHeight]})}(e,t);case mt.SET_ERROR:return function(e,t){return he({},e,{error:t.error})}(e,t);case mt.CLEAR_ERROR:return function(e){return he({},e,{error:null})}(e);case mt.RESET:return function(e){var t=he({},e,{zoomValue:"fit-width",zoomScale:1,rotation:0,pan:[0,0],viewerSize:null,imageSize:null,error:null,maintainCentre:!1},{imageSize:e.imageSize,viewerSize:e.viewerSize});return he(t,{zoomScale:zt(t)})}(e);default:return e}},Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _t.SET_TOOL:return function(e,t){return he({},e,{tool:t.tool})}(e,t);case _t.SET_SUBTOOL:return function(e,t){var n=he({},e.subTools,qt({},e.tool,t.subTool));return he({},e,{subTools:n})}(e,t);case _t.SET_HIGHLIGHT_ON:return function(e,t){var n=he({},e.highlight,{on:t.on});return he({},e,{maintainCentre:t.on,highlight:n})}(e,t);case _t.SET_HIGHLIGHT_SIZE:return function(e,t){var n=he({},e.highlight,{size:t.size});return he({},e,{highlight:n})}(e,t);case _t.ADD_ANNOTATION:return function(e,t){var n=t.annotation,r=e.annotations.nextId,o=r+1,i=he({},e.annotations,{nextId:o,map:he({},e.annotations.map,qt({},r,n))});return he({},e,{annotations:i})}(e,t);case _t.UPDATE_ANNOTATION:return function(e,t){var n=t.id,r=t.annotation,o=he({},e.annotations,{map:he({},e.annotations.map,qt({},n,he({},e.annotations.map[n],r)))});return he({},e,{annotations:o})}(e,t);case _t.REMOVE_ANNOTATION:return function(e,t){var n=t.id,r=he({},e.annotations,{map:he({},e.annotations.map)});return delete r.map[n],he({},e,{annotations:r})}(e,t);case _t.RESET_ANNOTATIONS:return function(e){return he({},e,Wt(),{tool:e.tool,subTools:e.subTools,pan:e.pan,highlight:e.highlight})}(e);case mt.SET_VIEWER_SIZE:return Gt(e,t);case mt.RESET:return function(e){var t=he({},e.highlight,{on:!1,size:e.highlight.defaultSize});return he({},e,Wt(),{tool:e.tool,subTools:e.subTools,highlight:t})}(e);default:return e}},function(e,t){return void 0===e?he({},Kt(e,t),Vt(e,t)):(e=Kt(e,t),Vt(e,t))})}),Jt=[ae];function Zt(e){return be.zooniverseLinks.projectLinkBase+e}function Yt(e){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xt(e){return(Xt="function"==typeof Symbol&&"symbol"===Yt(Symbol.iterator)?function(e){return Yt(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Yt(e)})(e)}function Qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function en(e){return(en=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nn(e,t){return(nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var rn=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=en(t).call(this,e))||"object"!==Xt(o)&&"function"!=typeof o?tn(r):o).state={navbarCollapsed:!0},n.handleNavbarToggle=n.handleNavbarToggle.bind(tn(n)),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nn(e,t)}(t,o.a.Component),n=t,(r=[{key:"handleNavbarToggle",value:function(){this.setState({navbarCollapsed:!this.state.navbarCollapsed})}},{key:"renderItem",value:function(e,t){var n=le([["nav-item",!0],["active",e==="#"+this.props.route]]);return o.a.createElement("li",{className:n},o.a.createElement("a",{className:"nav-link",href:e},t))}},{key:"render",value:function(){var e=le([["navbar-collapse justify-content-end",!0],["collapse",this.state.navbarCollapsed]]);return o.a.createElement("nav",{className:"navbar navbar-expand-md navbar-light bg-light",role:"navigation"},o.a.createElement("a",{className:"navbar-brand",href:"#"},"Weather Rescue DEMO"),o.a.createElement("button",{className:"navbar-toggler",type:"button",onClick:this.handleNavbarToggle},o.a.createElement("span",{className:"navbar-toggler-icon"})),o.a.createElement("div",{className:e},o.a.createElement("ul",{className:"navbar-nav"},this.renderItem("#","Home"),this.renderItem(Zt("/about"),"About"),this.renderItem("#classify","Classify"),this.renderItem(Zt("/talk"),"Talk"),this.renderItem(Zt("/stats"),"Stats"))))}}])&&Qt(n.prototype,r),i&&Qt(n,i),t}();rn.propTypes={route:c.a.string.isRequired};var on=rn;var an=function(){return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"jumbotron mt-3"},o.a.createElement("h1",null,"Weather Rescue DEMO"),o.a.createElement("p",{className:"lead"},"A demonstration custom site for the Weather Rescue project")))};function sn(e){return function(t,n){return t({type:Be.RESET}),t(bt()),t(Ce(e)),t(Re()).then(function(){var e=n().workflow.currentWorkflow;t(function(e){return{type:Be.SET_LOCATION_TITLE,workflow:e}}(e));var r=e.links.subject_sets;return t(Ne(r[0].id)),t(un())}).catch(function(e){return console.error(e)})}}function un(){return function(e,t){return e(function(e,t){var n=t(),r=n.workflow,o=n.subject;if(0===o.queue.length){var i={workflow_id:r.currentId,subject_set_id:o.subjectSet};return e({type:Ie.FETCH_SUBJECT_QUEUE}),me.a.type("subjects/queued").get(i).then(function(t){e({type:Ie.FETCH_SUBJECT_QUEUE_SUCCESS,queue:t}),e(xe())}).catch(function(t){e({type:Ie.FETCH_SUBJECT_QUEUE_ERROR,error:t})})}return Promise.resolve(e(xe()))}).then(function(){var n=t().subject;return e(function(e){return function(t){var n=function(e){return e.locations[0]["image/jpeg"]}(e);return t({type:Le.FETCH_IMAGE,src:n}),new Promise(function(e,r){var o=new Image;o.onload=function(){return t({type:Le.FETCH_IMAGE_SUCCESS,img:o}),e()},o.onerror=function(e){return t({type:Le.FETCH_IMAGE_ERROR,error:e}),r(e)},o.src=n})}}(n.currentSubject))}).then(function(){e(function(e,t){var n=t(),r=n.project,o=n.workflow,i=n.subject.currentSubject,a=o.currentWorkflow,s=de(),u={annotations:[],metadata:{workflow_version:a.version,started_at:s.toISOString(),user_agent:navigator.userAgent,user_language:"en",utc_offset:(60*s.getTimezoneOffset()).toString(),subject_dimensions:i.locations.map(function(){return null})},links:{project:r.id,workflow:a.id,subjects:[i.id]}};e({type:Fe.START_CLASSIFICATION,data:u})})}).then(function(){e(Ke())}).catch(function(e){return console.error(e)})}}function cn(){return function(e,t){var n=function(e){return[{task:"T3",value:[{task:"T7",value:e.pressure.value},{task:"T1",value:e.dryTemperature.value},{task:"T5",value:e.wetTemperature.value},{task:"T9",value:e.maxTemperature.value},{task:"T10",value:e.minTemperature.value},{task:"T6",value:e.rainfall.value}]}]}(t().task);return e(function(e){return function(t,n){var r,o,i,a=n().image,s=de(),u={annotations:e,metadata:{session:(i=sessionStorage.getItem("session_id")||null,null!==i?(r=i.id,o=i.ttl):(r="",o=0),o<Date.now()?(r=(i=He()).id,o=i.ttl):Ue(i={id:r,ttl:o=ze()}),r),finished_at:s.toISOString(),viewport:{width:window.innerWidth,height:window.innerHeight},subject_dimensions:a.imageMetadata}};t({type:Fe.COMPLETE_CLASSIFICATION,update:u})}}(n)),e(function(e){return e({type:Fe.SUBMIT_CLASSIFICATION}),e({type:Fe.SUBMIT_CLASSIFICATION_SUCCESS}),Promise.resolve()}).then(function(){return e({type:Be.NEXT_SUBJECT}),e(un())}).catch(function(e){return console.error(e)})}}function ln(e){return function(t){13===t.keyCode&&e(t)}}function hn(e,t){return o.a.Children.map(e,function(e){return o.a.cloneElement(e,t)})}function pn(e,t){return he({},e,t)}function fn(e){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dn(e){return(dn="function"==typeof Symbol&&"symbol"===fn(Symbol.iterator)?function(e){return fn(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":fn(e)})(e)}function yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mn(e){return(mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gn(e,t){return(gn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bn=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=mn(t).call(this,e))||"object"!==dn(o)&&"function"!=typeof o?vn(r):o).handleChange=n.handleChange.bind(vn(n)),n.handleFocus=n.handleFocus.bind(vn(n)),n.handleBlur=n.handleBlur.bind(vn(n)),n.handleClick=n.handleClick.bind(vn(n)),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gn(e,t)}(t,o.a.Component),n=t,(r=[{key:"handleChange",value:function(e){var t=e.target.value;this.props.dispatch(function(e,t){return{type:Be.UPDATE_VALUE,name:e,value:t}}(this.props.name,t))}},{key:"handleFocus",value:function(e){var t;ce(e.target),this.props.dispatch((t=this.props.name,{type:Be.BEGIN_UPDATE_VALUE,name:t}))}},{key:"handleBlur",value:function(){var e;this.props.dispatch((e=this.props.name,{type:Be.END_UPDATE_VALUE,name:e}))}},{key:"handleClick",value:function(e){ce(e.target)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.tabIndex,r=e.focused,i=e.value,a=e.partialErrors,s=e.fullErrors,u=le([["form-control value-input",!0],["is-invalid",r&&a.length>0||!r&&s.length>0],["is-valid",!r&&0===s.length]]),c=r&&a.length>0;return o.a.createElement("div",{className:"value-group"},o.a.createElement("input",{id:t,className:u,type:"text",value:i,tabIndex:n,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,onClick:this.handleClick}),c?o.a.createElement("div",{className:"invalid-tooltip value-tooltip"},a.join(", ")):null)}}])&&yn(n.prototype,r),i&&yn(n,i),t}();bn.propTypes={id:c.a.string.isRequired,tabIndex:c.a.number.isRequired,name:c.a.string.isRequired,value:c.a.string.isRequired,fullErrors:c.a.arrayOf(c.a.string).isRequired,partialErrors:c.a.arrayOf(c.a.string).isRequired,focused:c.a.bool.isRequired,dispatch:c.a.func.isRequired};var En=bn;function _n(e){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tn(e){return(Tn="function"==typeof Symbol&&"symbol"===_n(Symbol.iterator)?function(e){return _n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_n(e)})(e)}function wn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sn(e){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function On(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cn(e,t){return(Cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Rn=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Sn(t).call(this,e))||"object"!==Tn(o)&&"function"!=typeof o?On(r):o).handleKeyDown=n.handleKeyDown.bind(On(n)),n.handleNext=n.handleNext.bind(On(n)),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cn(e,t)}(t,o.a.Component),n=t,(r=[{key:"handleKeyDown",value:function(e){13===e.keyCode&&(e.preventDefault(),this.props.onSwitchInput(e.target.tabIndex,e.target.tabIndex+1))}},{key:"componentDidMount",value:function(){ue(1)}},{key:"handleNext",value:function(e){e.preventDefault(),this.props.dispatch(Ke())}},{key:"renderValueInput",value:function(e,t){var n=this.props,r=n.dispatch,i=n.onSwitchInput,a=this.props.values[e],s=a.value,u=a.focused,c=a.partialErrors,l=a.fullErrors;return o.a.createElement(En,{name:e,id:"".concat(e,"-input"),tabIndex:t,value:s,focused:u,partialErrors:c,fullErrors:l,onSwitchInput:i,dispatch:r})}},{key:"renderInstructionGroup",value:function(e,t,n,r){return o.a.createElement("div",{className:"instruction-group"},o.a.createElement("label",{htmlFor:"".concat(e,"-input")},n),this.renderValueInput(e,t),o.a.createElement("small",{className:"form-text text-muted"},r))}},{key:"render",value:function(){var e=this.props.locationTitle;return o.a.createElement("div",{className:"task-container"},o.a.createElement("p",{className:"step-title"},"Please enter data for ",e),o.a.createElement("div",{className:"task-group",onKeyDown:this.handleKeyDown},this.renderInstructionGroup("pressure",1,"Pressure","First column"),this.renderInstructionGroup("dryTemperature",2,"Dry bulb temperature","Third column"),this.renderInstructionGroup("wetTemperature",3,"Wet bulb temperature","Fourth column"),this.renderInstructionGroup("maxTemperature",4,"Max temperature","Sixth column"),this.renderInstructionGroup("minTemperature",5,"Min temperature","Seventh column"),this.renderInstructionGroup("rainfall",6,"Rainfall","Near right hand side")),o.a.createElement("div",{className:"buttons"},o.a.createElement("button",{className:"btn btn-success",type:"button",title:"Next",tabIndex:7,onClick:this.handleNext,onKeyDown:ln(this.handleNext)},"Next")))}}])&&wn(n.prototype,r),i&&wn(n,i),t}();Rn.propTypes={locationTitle:c.a.string.isRequired,dispatch:c.a.func.isRequired,values:c.a.object.isRequired,onSwitchInput:c.a.func.isRequired};var kn=Rn;function An(e){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function In(e){return(In="function"==typeof Symbol&&"symbol"===An(Symbol.iterator)?function(e){return An(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":An(e)})(e)}function Pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nn(e){return(Nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jn(e,t){return(jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ln=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Nn(t).call(this,e))||"object"!==In(o)&&"function"!=typeof o?xn(r):o).handleDoneAndTalk=n.handleDoneAndTalk.bind(xn(n)),n.handleDone=n.handleDone.bind(xn(n)),n.handleBack=n.handleBack.bind(xn(n)),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jn(e,t)}(t,o.a.Component),n=t,(r=[{key:"handleDoneAndTalk",value:function(){this.props.onDone()}},{key:"handleDone",value:function(e){e.preventDefault(),this.props.onDone()}},{key:"handleBack",value:function(e){e.preventDefault(),this.props.dispatch({type:Be.PREVIOUS_STEP})}},{key:"componentDidMount",value:function(){ue(1)}},{key:"renderValue",value:function(e){var t=this.props.values[e].value;return""==t?"BLANK":t}},{key:"renderInstructionGroup",value:function(e,t){return o.a.createElement("div",{className:"instruction-group"},o.a.createElement("div",{className:"summary-label"},t),o.a.createElement("div",{className:"summary-answer"},this.renderValue(e)))}},{key:"render",value:function(){var e=this.props.subject,t=Zt("/talk"+e.href);return o.a.createElement("div",{className:"task-container"},o.a.createElement("p",{className:"step-title"},"Summary"),o.a.createElement("div",{className:"task-group"},this.renderInstructionGroup("pressure","Pressure"),this.renderInstructionGroup("dryTemperature","Dry bulb temperature"),this.renderInstructionGroup("wetTemperature","Wet bulb temperature"),this.renderInstructionGroup("maxTemperature","Max temperature"),this.renderInstructionGroup("minTemperature","Min temperature"),this.renderInstructionGroup("rainfall","Rainfall")),o.a.createElement("div",{className:"font-weight-bold mb-4"},"THIS IS A DEMONSTRATION - YOUR CLASSIFICATION WILL NOT BE UPLOADED TO ZOONIVERSE!"),o.a.createElement("div",{className:"buttons"},o.a.createElement("a",{className:"btn btn-outline-secondary",href:t,target:"_blank",rel:"noopener noreferrer",tabIndex:"3",onClick:this.handleDoneAndTalk},"Done & Talk"),o.a.createElement("div",{className:"float-right"},o.a.createElement("button",{className:"btn btn-secondary",type:"button",title:"Back",tabIndex:"2",onClick:this.handleBack},"Back"),o.a.createElement("button",{className:"btn btn-success",type:"button",title:"Done",tabIndex:"1",onClick:this.handleDone,onKeyDown:ln(this.handleDone)},"Done"))))}}])&&Pn(n.prototype,r),i&&Pn(n,i),t}();Ln.propTypes={dispatch:c.a.func.isRequired,locationTitle:c.a.string.isRequired,values:c.a.object.isRequired,subject:c.a.object.isRequired,onDone:c.a.func.isRequired};var Dn=Ln;function Mn(e){return(Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Un(e){return(Un="function"==typeof Symbol&&"symbol"===Mn(Symbol.iterator)?function(e){return Mn(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Mn(e)})(e)}function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zn(e){return(zn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qn(e,t){return(qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Bn(e){var t=Wn(e,2),n=Wn(t[0],3),r=n[0],o=n[1],i=n[2],a=Wn(t[1],3),s=a[0],u=a[1],c=a[2];return"matrix(".concat(r,",").concat(s,",").concat(o,",").concat(u,",").concat(i,",").concat(c,")")}var Gn=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=zn(t).call(this,e))||"object"!==Un(o)&&"function"!=typeof o?Fn(r):o).viewerRef=null,n.handleResize=n.handleResize.bind(Fn(n)),n.handleKeyDown=n.handleKeyDown.bind(Fn(n)),n.handleKeyUp=n.handleKeyUp.bind(Fn(n)),n.handleMouseDown=n.handleMouseDown.bind(Fn(n)),n.handleMouseUp=n.handleMouseUp.bind(Fn(n)),n.handleMouseMove=n.handleMouseMove.bind(Fn(n)),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qn(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.zoomScale,r=t.imageSize,i=t.img,a=this.getTransform(),s=Wn(It(r,n),2),u=s[0],c=s[1],l=Wn(this.getSvgSize(),2),h=l[0],p=l[1],f="0 0 ".concat(h," ").concat(p);return o.a.createElement("div",{className:"viewer",ref:function(t){return e.viewerRef=t},style:{cursor:this.getCursor()},onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onMouseDown:this.handleMouseDown,tabIndex:"0"},o.a.createElement("svg",{width:h,height:p,viewBox:f},o.a.createElement("g",{transform:Bn(a)},o.a.createElement("image",{width:u,height:c,xlinkHref:i.src}),this.renderView())),this.props.children)}},{key:"getSvgSize",value:function(){var e=this.props,t=e.rotation,n=e.imageSize,r=e.zoomScale,o=Wn(n,2),i=o[0],a=o[1];return It(t%2==0?[i,a]:[a,i],r)}},{key:"renderView",value:function(){}},{key:"componentDidMount",value:function(){this.handleResize(),window.addEventListener("mouseup",this.handleMouseUp,!1),window.addEventListener("resize",this.handleResize,!1);var e,t=this.props.imageSize,n=this.getSvgSize(),r={naturalWidth:t[0],naturalHeight:t[1],clientWidth:n[0],clientHeight:n[1]};this.props.dispatch((e=r,function(t){t({type:Le.SET_IMAGE_METADATA,metadata:e})}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("resize",this.handleResize)}},{key:"addMouseMoveHandler",value:function(){this.viewerRef.addEventListener("mousemove",this.handleMouseMove,!1)}},{key:"removeMouseMoveHandler",value:function(){this.viewerRef.removeEventListener("mousemove",this.handleMouseMove)}},{key:"getTransform",value:function(){var e=this.props,t=e.zoomScale,n=e.imageSize,r=e.pan,o=e.rotation,i=Wn(r,2),a=i[0],s=i[1];return Lt(function(e,t){var n=kt(t,2),r=n[0],o=n[1];switch(e){case 0:return[[1,0,0],[0,1,0]];case 1:return[[0,-1,o],[1,0,0]];case 2:return[[-1,0,r],[0,-1,o]];case 3:return[[0,1,0],[-1,0,r]]}}(o,It(n,t)),[[1,0,t*a],[0,1,t*s]])}},{key:"getInverseTransform",value:function(){var e=this.props,t=e.zoomScale,n=e.imageSize,r=e.pan,o=e.rotation,i=Wn(r,2);return Lt([[1,0,-t*i[0]],[0,1,-t*i[1]]],Dt(o,It(n,t)))}},{key:"getCursor",value:function(){return"auto"}},{key:"getMousePos",value:function(e){var t=this.props.zoomScale,n=this.viewerRef.getBoundingClientRect(),r=[e.clientX-n.left,e.clientY-n.top];return It(r=jt(this.getInverseTransform(),r),1/t)}},{key:"getMouseDelta",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.props.zoomScale;switch(n){case"horizontal":t=[e.movementX,0];break;case"vertical":t=[0,e.movementY];break;default:t=[e.movementX,e.movementY]}var o=this.getInverseTransform();return o[0][2]=0,o[1][2]=0,It(t=jt(o,t),1/r)}},{key:"handleResize",value:function(){var e=this.getViewerSize();this.props.dispatch(function(e){return{type:mt.SET_VIEWER_SIZE,size:e}}(e))}},{key:"handleKeyDown",value:function(){}},{key:"handleKeyUp",value:function(){}},{key:"handleMouseDown",value:function(){}},{key:"handleMouseUp",value:function(){}},{key:"handleMouseMove",value:function(){}},{key:"getViewerSize",value:function(){return[this.viewerRef.clientWidth,this.viewerRef.clientHeight]}}])&&Hn(n.prototype,r),i&&Hn(n,i),t}();Gn.propTypes={img:c.a.instanceOf(Element).isRequired,imageSize:c.a.arrayOf(c.a.number).isRequired,zoomScale:c.a.number.isRequired,zoomToCenter:c.a.bool,rotation:c.a.number.isRequired,pan:c.a.arrayOf(c.a.number).isRequired,dispatch:c.a.func.isRequired,children:c.a.element};var Kn=Gn;function Vn(e){var t,n=e.title,r=e.iconClass,i=void 0===r?"":r,a=e.disabled,s=void 0!==a&&a,u=e.onClick;if(""===i)t=n;else{var c=le([["fa",!0],[i,!0]]);t=o.a.createElement("i",{className:c})}return o.a.createElement("button",{className:"menu-button",type:"button",onClick:u,title:n,disabled:s},t)}function $n(e){var t,n=e.value,r=e.title,i=e.tool,a=e.iconClass,s=void 0===a?"":a,u=e.onClick;if(""===s)t=r;else{var c=le([["fa fa-fw",!0],[s,!0]]);t=o.a.createElement("i",{className:c})}var l=le([["menu-button tool-button",!0],["active",n===i]]);return o.a.createElement("button",{className:l,type:"button",onClick:function(){return u(n)},title:r},t)}function Jn(e){var t=e.separatorLeft,n=void 0!==t&&t,r=e.separatorRight,i=le([["menu-button-group",!0],["menu-separator-left",n],["menu-separator-right",void 0!==r&&r]]);return o.a.createElement("div",{className:i},e.children)}function Zn(e){var t=e.tool,n=e.onChange;return o.a.createElement(o.a.Fragment,null,hn(e.children,{tool:t,onClick:n}))}function Yn(e){return(Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xn(e){return(Xn="function"==typeof Symbol&&"symbol"===Yn(Symbol.iterator)?function(e){return Yn(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Yn(e)})(e)}function Qn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function er(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nr(e,t,n){return t&&tr(e.prototype,t),n&&tr(e,n),e}function rr(e,t){return!t||"object"!==Xn(t)&&"function"!=typeof t?ir(e):t}function or(e){return(or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ir(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ar(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sr(e,t)}function sr(e,t){return(sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Vn.propTypes={title:c.a.string.isRequired,disabled:c.a.bool,iconClass:c.a.string,onClick:c.a.func.isRequired},$n.propTypes={title:c.a.string.isRequired,value:c.a.string.isRequired,iconClass:c.a.string,tool:c.a.string,onClick:c.a.func},Jn.propTypes={children:c.a.any,separatorLeft:c.a.bool,separatorRight:c.a.bool},Zn.propTypes={tool:c.a.string.isRequired,onChange:c.a.func.isRequired,children:c.a.any};var ur=[["fit-width","Fit Width"],["fit-height","Fit Height"],["actual-size","Actual Size"]],cr=[[10,!1],[20,!1],[30,!1],[40,!1],[50,!0],[60,!1],[70,!1],[80,!1],[90,!1],[100,!0],[120,!1],[140,!1],[160,!1],[180,!1],[200,!0],[230,!1],[260,!1],[290,!1],[320,!1],[360,!1],[400,!1],[450,!1],[500,!1]],lr=function(e){function t(e){var n;return er(this,t),(n=rr(this,or(t).call(this,e))).handleZoomOut=n.handleZoomOut.bind(ir(n)),n.handleZoomIn=n.handleZoomIn.bind(ir(n)),n.handleZoom=n.handleZoom.bind(ir(n)),n}return ar(t,o.a.Component),nr(t,[{key:"getZoomPercentage",value:function(){return Math.round(100*this.props.zoomScale)}},{key:"render",value:function(){var e=this.props.zoomValue,t=this.getZoomPercentage(),n=Qn(cr[0],1)[0],r=Qn(cr[cr.length-1],1)[0],i=ur.map(function(e){var t=Qn(e,2),n=t[0],r=t[1];return o.a.createElement("option",{key:n,value:n},r)}),a=cr.map(function(e){var t=Qn(e,2),n=t[0],r=t[1],i=n+"%";return o.a.createElement("option",{key:n,value:n,disabled:!r,hidden:!r},i)}),s=i.concat(a);return o.a.createElement(Jn,null,o.a.createElement(Vn,{title:"Zoom out",onClick:this.handleZoomOut,disabled:t<=n,iconClass:"fa-minus"}),o.a.createElement(Vn,{title:"Zoom in",onClick:this.handleZoomIn,disabled:t>=r,iconClass:"fa-plus"}),o.a.createElement("select",{className:"menu-control zoom-select",title:"Zoom",value:e,onChange:this.handleZoom},s))}},{key:"applyZoom",value:function(e){this.props.dispatch(function(e){return{type:mt.SET_ZOOM_VALUE,zoomValue:e}}(e))}},{key:"handleZoomIn",value:function(){for(var e="",t=this.getZoomPercentage(),n=0;n<cr.length;n++){var r=Qn(cr[n],1)[0];if(r>t){e=r+"";break}}this.applyZoom(e)}},{key:"handleZoomOut",value:function(){for(var e="",t=this.getZoomPercentage(),n=cr.length-1;n>=0;n--){var r=Qn(cr[n],1)[0];if(r<t){e=r+"";break}}this.applyZoom(e)}},{key:"handleZoom",value:function(e){this.applyZoom(e.target.value)}}]),t}();lr.propTypes={zoomValue:c.a.string.isRequired,zoomScale:c.a.number.isRequired,dispatch:c.a.func.isRequired};var hr=function(e){function t(e){var n;return er(this,t),(n=rr(this,or(t).call(this,e))).handleRotateClockwise=n.handleRotateClockwise.bind(ir(n)),n.handleRotateAnticlockwise=n.handleRotateAnticlockwise.bind(ir(n)),n}return ar(t,o.a.Component),nr(t,[{key:"render",value:function(){return o.a.createElement(Jn,null,o.a.createElement(Vn,{title:"Rotate anticlockwise",onClick:this.handleRotateAnticlockwise,iconClass:"fa-rotate-left"}),o.a.createElement(Vn,{title:"Rotate clockwise",onClick:this.handleRotateClockwise,iconClass:"fa-rotate-right"}))}},{key:"handleRotateClockwise",value:function(){this.props.dispatch(vt(1))}},{key:"handleRotateAnticlockwise",value:function(){this.props.dispatch(vt(-1))}}]),t}();hr.propTypes={dispatch:c.a.func.isRequired};var pr=function(e){function t(e){var n;return er(this,t),(n=rr(this,or(t).call(this,e))).handleHighlighterSwitch=n.handleHighlighterSwitch.bind(ir(n)),n.handleExpandHighlighter=n.handleExpandHighlighter.bind(ir(n)),n.handleShrinkHighlighter=n.handleShrinkHighlighter.bind(ir(n)),n}return ar(t,o.a.Component),nr(t,[{key:"renderHighlighterToggle",value:function(){var e=this.props.highlight.on,t=le([["fa fa-fw",!0],["fa-toggle-on",e],["fa-toggle-off",!e]]);return o.a.createElement("label",{className:"menu-switch",htmlFor:"highlighter-toggle",title:"Toggle highlighter"},e?"Highlight On":"Highlight Off"," ",o.a.createElement("i",{className:t}),o.a.createElement("input",{id:"highlighter-toggle",type:"checkbox",onChange:this.handleHighlighterSwitch}))}},{key:"render",value:function(){var e=this.props.highlight,t=e.on,n=e.size;return o.a.createElement(Jn,{separatorRight:!0},this.renderHighlighterToggle(),o.a.createElement(Vn,{title:"Expand highlighter",onClick:this.handleExpandHighlighter,iconClass:"fa-expand",disabled:!t}),o.a.createElement(Vn,{title:"Shrink highlighter",onClick:this.handleShrinkHighlighter,iconClass:"fa-compress",disabled:!t||2===n}))}},{key:"handleHighlighterSwitch",value:function(){var e=this.props.highlight.on;this.props.dispatch(function(e){return{type:_t.SET_HIGHLIGHT_ON,on:e}}(!e))}},{key:"handleExpandHighlighter",value:function(){var e=this.props.highlight.size;this.props.dispatch(Ot(e+2))}},{key:"handleShrinkHighlighter",value:function(){var e=this.props.highlight.size;this.props.dispatch(Ot(e-2))}}]),t}();function fr(e){return(fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dr(e){return(dr="function"==typeof Symbol&&"symbol"===fr(Symbol.iterator)?function(e){return fr(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":fr(e)})(e)}function yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mr(e){return(mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gr(e,t){return(gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}pr.propTypes={highlight:c.a.object.isRequired,dispatch:c.a.func.isRequired};var br=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=mr(t).call(this,e))||"object"!==dr(o)&&"function"!=typeof o?vr(r):o).handleReset=n.handleReset.bind(vr(n)),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gr(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.zoomValue,n=e.zoomScale,r=e.highlight,i=e.dispatch;return o.a.createElement("nav",{className:"menu-button-bar"},o.a.createElement(lr,{zoomValue:t,zoomScale:n,dispatch:i}),o.a.createElement(hr,{dispatch:i}),o.a.createElement(pr,{highlight:r,dispatch:i}),o.a.createElement(Jn,null,o.a.createElement(Vn,{title:"Reset all",onClick:this.handleReset,iconClass:"fa-refresh"})),this.props.children)}},{key:"handleReset",value:function(){this.props.dispatch(bt())}}])&&yr(n.prototype,r),i&&yr(n,i),t}();br.propTypes={zoomValue:c.a.string.isRequired,zoomScale:c.a.number.isRequired,highlight:c.a.object.isRequired,children:c.a.node,dispatch:c.a.func.isRequired};var Er=br;function _r(e){return(_r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tr(e){return(Tr="function"==typeof Symbol&&"symbol"===_r(Symbol.iterator)?function(e){return _r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_r(e)})(e)}function wr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Or(e,t,n){return t&&Sr(e.prototype,t),n&&Sr(e,n),e}function Cr(e,t){return!t||"object"!==Tr(t)&&"function"!=typeof t?kr(e):t}function Rr(e){return(Rr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ar(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ir(e,t)}function Ir(e,t){return(Ir=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pr=function(e){function t(e){var n;return wr(this,t),(n=Cr(this,Rr(t).call(this,e))).handleToolChange=n.handleToolChange.bind(kr(n)),n}return Ar(t,o.a.Component),Or(t,[{key:"render",value:function(){var e=this.props.tool;return o.a.createElement(Jn,{separatorRight:!0},o.a.createElement(Zn,{tool:e,onChange:this.handleToolChange},o.a.createElement($n,{title:"Pan",value:Tt.PAN}),o.a.createElement($n,{title:"Annotate",value:Tt.ANNOTATE})))}},{key:"handleToolChange",value:function(e){this.props.dispatch(function(e){return{type:_t.SET_TOOL,tool:e}}(e))}}]),t}();Pr.propTypes={tool:c.a.string.isRequired,dispatch:c.a.func.isRequired};var Nr=function(e){function t(e){var n;return wr(this,t),(n=Cr(this,Rr(t).call(this,e))).handleSubToolChange=n.handleSubToolChange.bind(kr(n)),n.handleClearAnnotations=n.handleClearAnnotations.bind(kr(n)),n}return Ar(t,o.a.Component),Or(t,[{key:"render",value:function(){var e=wt.ANNOTATE,t=this.props.subTool;return o.a.createElement(Jn,null,o.a.createElement(Zn,{tool:t,onChange:this.handleSubToolChange},o.a.createElement($n,{title:"Line",value:e.LINE,iconClass:"fa-pencil"}),o.a.createElement($n,{title:"Rectangle",value:e.RECTANGLE,iconClass:"fa-square-o"}),o.a.createElement($n,{title:"Move",value:e.MOVE,iconClass:"fa-arrows"}),o.a.createElement($n,{title:"Edit",value:e.EDIT,iconClass:"fa-mouse-pointer"}),o.a.createElement($n,{title:"Delete",value:e.DELETE,iconClass:"fa-remove"})),o.a.createElement(Vn,{title:"Clear annotations",onClick:this.handleClearAnnotations,iconClass:"fa-trash"}))}},{key:"handleSubToolChange",value:function(e){this.props.dispatch(St(e))}},{key:"handleClearAnnotations",value:function(){this.props.dispatch({type:_t.RESET_ANNOTATIONS})}}]),t}();Nr.propTypes={subTool:c.a.string.isRequired,dispatch:c.a.func.isRequired};var xr=function(e){function t(e){var n;return wr(this,t),(n=Cr(this,Rr(t).call(this,e))).handleSubToolChange=n.handleSubToolChange.bind(kr(n)),n.handleResetPan=n.handleResetPan.bind(kr(n)),n}return Ar(t,o.a.Component),Or(t,[{key:"render",value:function(){var e=wt.PAN,t=this.props.subTool;return o.a.createElement(Jn,null,o.a.createElement(Zn,{tool:t,onChange:this.handleSubToolChange},o.a.createElement($n,{title:"All",value:e.ALL,iconClass:"fa-arrows"}),o.a.createElement($n,{title:"Vertical",value:e.VERTICAL,iconClass:"fa-arrows-v"}),o.a.createElement($n,{title:"Horizontal",value:e.HORIZONTAL,iconClass:"fa-arrows-h"})),o.a.createElement(Vn,{title:"Reset pan",onClick:this.handleResetPan,iconClass:"fa-bullseye"}))}},{key:"handleSubToolChange",value:function(e){this.props.dispatch(St(e))}},{key:"handleResetPan",value:function(){this.props.dispatch({type:mt.RESET_PAN})}}]),t}();function jr(e){var t=e.highlight,n=e.rotation;if(!t.on)return null;var r=le([["highlighter",!0],["highlighter-horizontal",n%2==0],["highlighter-vertical",n%2==1]]),i=t.size+"px",a=n%2==0?{height:i}:{width:i};return o.a.createElement("div",{className:r,style:a})}function Lr(e){return(Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Mr(e){return(Mr="function"==typeof Symbol&&"symbol"===Lr(Symbol.iterator)?function(e){return Lr(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Lr(e)})(e)}function Ur(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zr(e,t,n){return t&&Hr(e.prototype,t),n&&Hr(e,n),e}function Fr(e,t){return!t||"object"!==Mr(t)&&"function"!=typeof t?Wr(e):t}function qr(e){return(qr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Br(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gr(e,t)}function Gr(e,t){return(Gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}xr.propTypes={subTool:c.a.string.isRequired,dispatch:c.a.func.isRequired},jr.propTypes={rotation:c.a.number.isRequired,highlight:c.a.object.isRequired};var Kr=function(e){function t(e){var n;return Ur(this,t),(n=Fr(this,qr(t).call(this,e))).handleMouseDown=n.handleMouseDown.bind(Wr(n)),n}return Br(t,o.a.Component),zr(t,[{key:"handleMouseDown",value:function(){this.props.onHit(this)}},{key:"renderItem",value:function(){return null}},{key:"renderShape",value:function(){return null}},{key:"renderChildren",value:function(){return null}},{key:"render",value:function(){return o.a.createElement("g",null,this.renderItem(),hn(this.renderShape(),{onMouseDown:this.handleMouseDown}),this.renderChildren())}}]),t}();Kr.propTypes={zoomScale:c.a.number.isRequired,onHit:c.a.func.isRequired};var Vr=function(e){function t(e){return Ur(this,t),Fr(this,qr(t).call(this,e))}return Br(t,Kr),zr(t,[{key:"renderItem",value:function(){var e=this.props,t=Dr(It(e.pos,e.zoomScale),2),n=t[0],r=t[1];return o.a.createElement("rect",{x:n-4,y:r-4,width:8,height:8,stroke:"red",fill:"transparent",strokeWidth:"2"})}},{key:"renderShape",value:function(){var e=this.props,t=Dr(It(e.pos,e.zoomScale),2),n=t[0],r=t[1];return o.a.createElement("rect",{x:n-9,y:r-9,width:18,height:18,stroke:"none",fill:"transparent"})}}]),t}();Vr.propTypes=pn(Kr.propTypes,{id:c.a.string,parentItem:c.a.object.isRequired,pos:c.a.arrayOf(c.a.number).isRequired});var $r=function(e){function t(e){return Ur(this,t),Fr(this,qr(t).call(this,e))}return Br(t,Kr),zr(t,[{key:"renderItem",value:function(){var e=this.props,t=Dr(xt(e.rect,e.zoomScale),2),n=Dr(t[0],2),r=n[0],i=n[1],a=Dr(t[1],2),s=a[0],u=a[1];return o.a.createElement("rect",{x:r,y:i,width:s-r,height:u-i,stroke:"red",fill:"none",strokeWidth:"2"})}},{key:"renderChildren",value:function(){var e=this.props,t=e.showControlPoints,n=e.rect,r=e.zoomScale,i=e.onHit,a=function(e){var t=kt(e,2),n=t[0],r=t[1],o=kt(n,2),i=o[0],a=o[1],s=kt(r,2),u=s[0],c=s[1];return[[(i+u)/2,a],[(i+u)/2,c],[i,(a+c)/2],[u,(a+c)/2]]}(n);return t?o.a.createElement("g",null,o.a.createElement(Vr,{id:"h0",parentItem:this,pos:a[0],zoomScale:r,onHit:i}),o.a.createElement(Vr,{id:"h1",parentItem:this,pos:a[1],zoomScale:r,onHit:i}),o.a.createElement(Vr,{id:"v0",parentItem:this,pos:a[2],zoomScale:r,onHit:i}),o.a.createElement(Vr,{id:"v1",parentItem:this,pos:a[3],zoomScale:r,onHit:i})):null}},{key:"renderShape",value:function(){var e=this.props,t=Dr(xt(e.rect,e.zoomScale),2),n=Dr(t[0],2),r=n[0],i=n[1],a=Dr(t[1],2),s=a[0],u=a[1];return o.a.createElement("rect",{x:r,y:i,width:s-r,height:u-i,stroke:"transparent",fill:"none",strokeWidth:10})}}]),t}();$r.propTypes=pn(Kr.propTypes,{id:c.a.string.isRequired,rect:c.a.arrayOf(c.a.arrayOf(c.a.number)).isRequired,showControlPoints:c.a.bool});var Jr=function(e){function t(e){return Ur(this,t),Fr(this,qr(t).call(this,e))}return Br(t,Kr),zr(t,[{key:"renderItem",value:function(){var e=this.props,t=e.line,n=e.zoomScale,r=Dr(t,2),i=r[0],a=r[1],s=Dr(It(i,n),2),u=s[0],c=s[1],l=Dr(It(a,n),2),h=l[0],p=l[1];return o.a.createElement("line",{x1:u,y1:c,x2:h,y2:p,stroke:"red",fill:"none",strokeWidth:"2"})}},{key:"renderChildren",value:function(){var e=this.props,t=e.line,n=e.zoomScale,r=e.showControlPoints,i=e.onHit,a=Dr(t,2),s=a[0],u=a[1];return r?o.a.createElement("g",null,o.a.createElement(Vr,{id:"p0",parentItem:this,pos:s,zoomScale:n,onHit:i}),o.a.createElement(Vr,{id:"p1",parentItem:this,pos:u,zoomScale:n,onHit:i})):null}},{key:"renderShape",value:function(){var e=this.props,t=Dr(xt(e.line,e.zoomScale),2),n=Dr(t[0],2),r=n[0],i=n[1],a=Dr(t[1],2),s=a[0],u=a[1];return o.a.createElement("line",{x1:r,y1:i,x2:s,y2:u,stroke:"transparent",fill:"none",strokeWidth:10})}}]),t}();function Zr(e){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yr(e){return(Yr="function"==typeof Symbol&&"symbol"===Zr(Symbol.iterator)?function(e){return Zr(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Zr(e)})(e)}function Xr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function eo(e,t){return!t||"object"!==Yr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function to(e){return(to=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function no(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ro(e,t)}function ro(e,t){return(ro=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function io(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ao(e,t,n){return t&&io(e.prototype,t),n&&io(e,n),e}Jr.propTypes=pn(Kr.propTypes,{id:c.a.string.isRequired,line:c.a.arrayOf(c.a.arrayOf(c.a.number)).isRequired,showControlPoints:c.a.bool});var so=function(){function e(t){oo(this,e),this.viewer=t}return ao(e,[{key:"handleKeyDown",value:function(){}},{key:"handleKeyUp",value:function(){}},{key:"handleMouseDown",value:function(){}},{key:"handleMouseUp",value:function(){}},{key:"handleMouseMove",value:function(){}}]),e}(),uo=function(e){function t(e){var n;return oo(this,t),(n=eo(this,to(t).call(this,e))).panning=!1,n}return no(t,so),ao(t,[{key:"getCursor",value:function(){return this.panning?"grabbing":"grab"}},{key:"handleKeyDown",value:function(e){var t=null;switch(e.keyCode){case 37:t=[10,0];break;case 38:t=[0,10];break;case 39:t=[-10,0];break;case 40:t=[0,-10]}if(t){var n=At(this.viewer.props.pan,t);this.viewer.props.dispatch(gt(n))}}},{key:"handleMouseDown",value:function(){this.panning=!0,this.viewer.addMouseMoveHandler()}},{key:"handleMouseUp",value:function(){this.panning=!1,this.viewer.removeMouseMoveHandler()}},{key:"handleMouseMove",value:function(e){var t;switch(this.viewer.props.subTool){case wt.PAN.ALL:t=this.viewer.getMouseDelta(e);break;case wt.PAN.HORIZONTAL:t=this.viewer.getMouseDelta(e,"horizontal");break;case wt.PAN.VERTICAL:t=this.viewer.getMouseDelta(e,"vertical")}var n=At(this.viewer.props.pan,t);this.viewer.props.dispatch(gt(n))}}]),t}(),co=function(e){function t(e){var n;return oo(this,t),(n=eo(this,to(t).call(this,e))).hitItem=null,n.panning=!1,n.currentId=null,n.drawingStart=null,n.fixedPoint=null,n.editPoint=null,n}return no(t,so),ao(t,[{key:"getCursor",value:function(){switch(this.viewer.props.subTool){case wt.ANNOTATE.LINE:case wt.ANNOTATE.RECTANGLE:return"crosshair";case wt.ANNOTATE.MOVE:return this.viewer.hitItem?"grabbing":"grab";case wt.ANNOTATE.EDIT:return"default";case wt.ANNOTATE.DELETE:return"not-allowed"}}},{key:"handleMouseDown",value:function(e){var t,n=this,r=this.viewer.getMousePos(e);pe(this.viewer.props.subTool,(Xr(t={},wt.ANNOTATE.MOVE,function(){n.viewer.hitItem&&(n.currentId=n.viewer.hitItem.props.id,n.viewer.addMouseMoveHandler())}),Xr(t,wt.ANNOTATE.LINE,function(){n.drawingStart=r,n.currentId=n.viewer.props.annotations.nextId,n.viewer.addMouseMoveHandler(),n.viewer.props.dispatch(Ct({kind:"line",line:[r,r]}))}),Xr(t,wt.ANNOTATE.RECTANGLE,function(){n.drawingStart=r,n.currentId=n.viewer.props.annotations.nextId,n.viewer.addMouseMoveHandler(),n.viewer.props.dispatch(Ct({kind:"rectangle",rect:[r,r]}))}),Xr(t,wt.ANNOTATE.EDIT,function(){if(n.viewer.hitItem instanceof Vr){var e=n.viewer.hitItem.props,t=e.id,r=e.parentItem;if(n.currentId=r.props.id,r instanceof Jr){var o=Qr(n.viewer.props.annotations.map[n.currentId].line,2),i=o[0],a=o[1];n.editPoint="p0"===t?i:a,n.fixedPoint="p0"===t?a:i}else if(r instanceof $r){var s=Qr(n.viewer.props.annotations.map[n.currentId].rect,2),u=s[0],c=s[1];n.editPoint="v0"===t||"h0"===t?u:c,n.fixedPoint="v0"===t||"h0"===t?c:u}n.viewer.addMouseMoveHandler()}}),Xr(t,wt.ANNOTATE.DELETE,function(){var e;n.viewer.hitItem&&n.viewer.props.dispatch((e=n.viewer.hitItem.props.id,{type:_t.REMOVE_ANNOTATION,id:e}))}),t))}},{key:"handleMouseUp",value:function(){var e,t=this;this.currentId=null,pe(this.viewer.props.subTool,(Xr(e={},wt.ANNOTATE.LINE,function(){t.drawingStart=null}),Xr(e,wt.ANNOTATE.RECTANGLE,function(){t.drawingStart=null}),Xr(e,wt.ANNOTATE.EDIT,function(){t.fixedPoint=null,t.editPoint=null}),e)),this.viewer.removeMouseMoveHandler()}},{key:"handleMouseMove",value:function(e){var t,n=this,r=this.viewer.getMousePos(e);pe(this.viewer.props.subTool,(Xr(t={},wt.ANNOTATE.MOVE,function(){var t=n.viewer.getMouseDelta(e);if(n.viewer.hitItem instanceof $r){var r=n.viewer.props.annotations.map[n.currentId].rect;r=Nt(r,t),n.viewer.props.dispatch(Rt(n.currentId,{rect:r}))}else if(n.viewer.hitItem instanceof Jr){var o=n.viewer.props.annotations.map[n.currentId].line;o=Nt(o,t),n.viewer.props.dispatch(Rt(n.currentId,{line:o}))}}),Xr(t,wt.ANNOTATE.LINE,function(){var e=[n.drawingStart,r];n.viewer.props.dispatch(Rt(n.currentId,{line:e}))}),Xr(t,wt.ANNOTATE.RECTANGLE,function(){var e=Pt([n.drawingStart,r]);n.viewer.props.dispatch(Rt(n.currentId,{rect:e}))}),Xr(t,wt.ANNOTATE.EDIT,function(){var e=n.viewer.hitItem.props,t=e.id,o=e.parentItem;if(o instanceof Jr){n.editPoint=r;var i=[n.fixedPoint,n.editPoint];n.viewer.props.dispatch(Rt(n.currentId,{line:i}))}else if(o instanceof $r){var a=Qr(r,2),s=a[0],u=a[1],c=Qr(n.editPoint,2),l=c[0],h=c[1];l="v0"===t||"v1"===t?s:l,h="h0"===t||"h1"===t?u:h,n.editPoint=[l,h];var p=Pt([n.fixedPoint,n.editPoint]);n.viewer.props.dispatch(Rt(n.currentId,{rect:p}))}}),t))}}]),t}();function lo(e){return(lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ho(e){return(ho="function"==typeof Symbol&&"symbol"===lo(Symbol.iterator)?function(e){return lo(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":lo(e)})(e)}function po(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mo(e,t,n){return t&&yo(e.prototype,t),n&&yo(e,n),e}function vo(e,t){return!t||"object"!==ho(t)&&"function"!=typeof t?bo(e):t}function go(e){return(go=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Eo(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_o(e,t)}function _o(e,t){return(_o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var To=function(e){function t(e){var n,r;return fo(this,t),(r=vo(this,go(t).call(this,e))).toolControllers=(po(n={},Tt.PAN,new uo(bo(r))),po(n,Tt.ANNOTATE,new co(bo(r))),n),r.state={mouseDown:!1},r.handleHit=r.handleHit.bind(bo(r)),r}return Eo(t,Kn),mo(t,[{key:"renderView",value:function(){var e=this,t=this.props,n=t.zoomScale,r=t.subTool,i=t.annotations,a=r===wt.ANNOTATE.EDIT;return o.a.createElement("g",null,Object.keys(i.map).map(function(t){var r=i.map[t];switch(r.kind){case"line":return o.a.createElement(Jr,{key:t,id:t,line:r.line,zoomScale:n,onHit:e.handleHit,showControlPoints:a});case"rectangle":return o.a.createElement($r,{key:t,id:t,rect:r.rect,zoomScale:n,onHit:e.handleHit,showControlPoints:a})}}))}},{key:"componentDidUpdate",value:function(){this.viewerRef.style.cursor=this.getCursor()}},{key:"getCursor",value:function(){return this.toolControllers[this.props.tool].getCursor()}},{key:"handleHit",value:function(e){this.hitItem=e}},{key:"handleKeyDown",value:function(e){return this.toolControllers[this.props.tool].handleKeyDown(e)}},{key:"handleKeyUp",value:function(e){return this.toolControllers[this.props.tool].handleKeyUp(e)}},{key:"handleMouseDown",value:function(e){e.preventDefault();var t=this.toolControllers[this.props.tool].handleMouseDown(e);return this.setState({mouseDown:!0}),t}},{key:"handleMouseUp",value:function(e){this.hitItem=null;var t=this.toolControllers[this.props.tool].handleMouseUp(e);return this.setState({mouseDown:!1}),t}},{key:"handleMouseMove",value:function(e){return this.toolControllers[this.props.tool].handleMouseMove(e)}}]),t}();To.propTypes=pn(Kn.propTypes,{img:c.a.instanceOf(Element).isRequired,tool:c.a.string.isRequired,subTool:c.a.string.isRequired,pan:c.a.arrayOf(c.a.number).isRequired,annotations:c.a.object.isRequired});var wo=function(e){function t(){return fo(this,t),vo(this,go(t).apply(this,arguments))}return Eo(t,o.a.Component),mo(t,[{key:"renderToolMenu",value:function(){var e=this.props,t=e.tool,n=e.subTool,r=e.dispatch;switch(t){case Tt.PAN:return o.a.createElement(xr,{subTool:n,dispatch:r});case Tt.ANNOTATE:return o.a.createElement(Nr,{subTool:n,dispatch:r})}}},{key:"render",value:function(){var e=this.props,t=e.tool,n=e.subTool,r=e.zoomValue,i=e.zoomScale,a=e.imageSize,s=e.rotation,u=e.highlight,c=e.pan,l=e.annotations,h=e.img,p=e.dispatch;return o.a.createElement("div",{className:"viewer-container"},o.a.createElement("div",{className:"viewer-inner-container"},o.a.createElement(Er,{zoomValue:r,zoomScale:i,highlight:u,dispatch:p},o.a.createElement(Pr,{tool:t,dispatch:p}),this.renderToolMenu()),o.a.createElement(To,{tool:t,subTool:n,pan:c,imageSize:a,zoomScale:i,rotation:s,annotations:l,img:h,dispatch:p},o.a.createElement(jr,{rotation:s,highlight:u}))))}}]),t}();wo.propTypes={tool:c.a.string.isRequired,subTool:c.a.string,zoomValue:c.a.string.isRequired,zoomScale:c.a.number.isRequired,imageSize:c.a.arrayOf(c.a.number).isRequired,rotation:c.a.number.isRequired,error:c.a.string,highlight:c.a.object.isRequired,pan:c.a.arrayOf(c.a.number).isRequired,annotations:c.a.object.isRequired,img:c.a.instanceOf(Element).isRequired,dispatch:c.a.func.isRequired};var So=re(function(e){var t=e.viewer,n=e.image,r=t.zoomValue,o=t.zoomScale,i=t.imageSize,a=t.rotation,s=t.error,u=t.tool,c=t.subTools,l=t.highlight,h=t.pan,p=t.annotations,f=n.img;return{zoomValue:r,zoomScale:o,imageSize:i,rotation:a,error:s,tool:u,subTool:c[u],highlight:l,pan:h,annotations:p,img:f}})(wo);function Oo(e){return(Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Co(e){return(Co="function"==typeof Symbol&&"symbol"===Oo(Symbol.iterator)?function(e){return Oo(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Oo(e)})(e)}function Ro(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ko(e){return(ko=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ao(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Io(e,t){return(Io=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Po=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=ko(t).call(this,e))||"object"!==Co(o)&&"function"!=typeof o?Ao(r):o).handleWorkflowChange=n.handleWorkflowChange.bind(Ao(n)),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Io(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.activeWorkflows,n=e.currentWorkflowId;return o.a.createElement("div",{className:"workflow-selector form-inline"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"workflow-selector"},"Workflow"),o.a.createElement("select",{className:"form-control mx-3",id:"workflow-selector",value:n,onChange:this.handleWorkflowChange},t.map(function(e){var t=e.id,n=e.displayName;return o.a.createElement("option",{key:t,value:t},n)}))))}},{key:"handleWorkflowChange",value:function(e){this.props.dispatch(sn(e.target.value))}}])&&Ro(n.prototype,r),i&&Ro(n,i),t}();Po.propTypes={currentWorkflowId:c.a.string.isRequired,activeWorkflows:c.a.arrayOf(c.a.object).isRequired,dispatch:c.a.func.isRequired};var No=Po;function xo(e){return(xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jo(e){return(jo="function"==typeof Symbol&&"symbol"===xo(Symbol.iterator)?function(e){return xo(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":xo(e)})(e)}function Lo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Do(e){return(Do=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uo(e,t){return(Uo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ho=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Do(t).call(this,e))||"object"!==jo(o)&&"function"!=typeof o?Mo(r):o).state={nextTabIndex:-1},n.handleSwitchInput=n.handleSwitchInput.bind(Mo(n)),n.handleClassificationCompleted=n.handleClassificationCompleted.bind(Mo(n)),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uo(e,t)}(t,o.a.Component),n=t,(r=[{key:"updateTabIndex",value:function(){var e=this.state.nextTabIndex;-1!==e&&(ue(e),this.setState({nextTabIndex:-1}))}},{key:"handleSwitchInput",value:function(e,t){var n,r;n=e,(r=document.querySelector("[tabIndex='"+n+"']"))&&r.blur(),this.setState({nextTabIndex:t})}},{key:"componentDidUpdate",value:function(){this.updateTabIndex()}},{key:"componentDidMount",value:function(){He(),this.props.dispatch(function(e,t){return e(Te()).then(function(){return e(ke())}).then(function(){var n=t().workflow;if(n.status===Oe.ACTIVE_WORKFLOWS_EMPTY)return Promise.resolve();var r=n.activeWorkflows;return e(sn(r[0].id))}).catch(function(e){return console.error(e)})})}},{key:"handleClassificationCompleted",value:function(){this.props.dispatch(cn())}},{key:"renderStep",value:function(){var e=this.props,t=e.taskStatus,n=e.locationTitle,r=e.values,i=e.valuesOk,a=e.subject,s=e.dispatch;switch(t){case Ge.INIT:return null;case Ge.TRANSCRIBE:return o.a.createElement(kn,{locationTitle:n,values:r,valuesOk:i,dispatch:s,onSwitchInput:this.handleSwitchInput});case Ge.SUMMARY:return o.a.createElement(Dn,{locationTitle:n,values:r,subject:a.currentSubject,dispatch:s,onDone:this.handleClassificationCompleted})}}},{key:"renderLoader",value:function(){return o.a.createElement("div",{className:"loader"},o.a.createElement("i",{className:"fa fa-spinner fa-spin fa-fw fa-2x"}))}},{key:"render",value:function(){var e=this.props,t=e.workflowStatus,n=e.taskStatus,r=e.currentWorkflowId,i=e.activeWorkflows,a=e.dispatch;return t===Oe.ACTIVE_WORKFLOWS_EMPTY?o.a.createElement("div",{className:"outer-container"},o.a.createElement("div",{className:"alert alert-secondary",role:"alert"},"There are no active workflows available!")):o.a.createElement("div",{className:"outer-container"},t===Oe.WORKFLOW_READY?o.a.createElement(No,{currentWorkflowId:r,activeWorkflows:i,dispatch:a}):null,n===Ge.INIT?this.renderLoader():o.a.createElement("div",{className:"main-container"},o.a.createElement("div",{className:"main-inner-container"},o.a.createElement(So,null),this.renderStep())))}}])&&Lo(n.prototype,r),i&&Lo(n,i),t}();Ho.propTypes={currentWorkflowId:c.a.string,activeWorkflows:c.a.arrayOf(c.a.object).isRequired,subject:c.a.object,image:c.a.object.isRequired,locationTitle:c.a.string,taskStatus:c.a.string.isRequired,workflowStatus:c.a.string.isRequired,values:c.a.object.isRequired,valuesOk:c.a.bool.isRequired,dispatch:c.a.func.isRequired};var zo=re(function(e){var t=e.workflow,n=e.subject,r=e.image,o=e.task;return{currentWorkflowId:t.currentId,activeWorkflows:t.activeWorkflows,image:r,subject:n,taskStatus:o.status,workflowStatus:t.status,locationTitle:o.locationTitle,values:{pressure:o.pressure,dryTemperature:o.dryTemperature,wetTemperature:o.wetTemperature,maxTemperature:o.maxTemperature,minTemperature:o.minTemperature,rainfall:o.rainfall},valuesOk:o.valuesOk}})(Ho);function Fo(e){return(Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qo(e){return(qo="function"==typeof Symbol&&"symbol"===Fo(Symbol.iterator)?function(e){return Fo(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Fo(e)})(e)}function Wo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bo(e){return(Bo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Go(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ko(e,t){return(Ko=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Vo=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Bo(t).call(this,e))||"object"!==qo(o)&&"function"!=typeof o?Go(r):o).handleNavigate=n.handleNavigate.bind(Go(n)),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ko(e,t)}(t,o.a.Component),n=t,(r=[{key:"handleNavigate",value:function(){var e;this.props.dispatch((e=window.location.hash.substring(1),window.location.hash="#"+e,{type:ft.NAVIGATE,route:e}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("hashchange",this.handleNavigate)}},{key:"componentDidMount",value:function(){this.handleNavigate(),window.addEventListener("hashchange",this.handleNavigate)}},{key:"renderPage",value:function(e){switch(e){case"":return o.a.createElement(an,null);case"classify":return o.a.createElement(zo,null);default:return o.a.createElement("div",{className:"text-center font-md"},"Not found!")}}},{key:"render",value:function(){var e=this.props.route;return o.a.createElement(o.a.Fragment,null,o.a.createElement(on,{route:e}),this.renderPage(e))}}])&&Wo(n.prototype,r),i&&Wo(n,i),t}();Vo.propTypes={route:c.a.string.isRequired,dispatch:c.a.func.isRequired};var $o=re(function(e){return{route:e.router.route}})(Vo),Jo=k($t,N.apply(void 0,Jt));a.a.render(o.a.createElement(p,{store:Jo},o.a.createElement($o,null)),document.getElementById("app"))}]);